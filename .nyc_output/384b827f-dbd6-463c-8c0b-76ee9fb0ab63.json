{"/Users/evan/Documents/Projects/2022/cpsc310-project/src/controller/IInsightFacade.ts":{"path":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/controller/IInsightFacade.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":113}},"2":{"start":{"line":5,"column":0},"end":{"line":8,"column":89}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":46}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":42}},"5":{"start":{"line":11,"column":8},"end":{"line":11,"column":23}},"6":{"start":{"line":12,"column":8},"end":{"line":12,"column":52}},"7":{"start":{"line":15,"column":0},"end":{"line":15,"column":36}},"8":{"start":{"line":18,"column":8},"end":{"line":18,"column":23}},"9":{"start":{"line":19,"column":8},"end":{"line":19,"column":53}},"10":{"start":{"line":22,"column":0},"end":{"line":22,"column":38}},"11":{"start":{"line":25,"column":8},"end":{"line":25,"column":23}},"12":{"start":{"line":26,"column":8},"end":{"line":26,"column":59}},"13":{"start":{"line":29,"column":0},"end":{"line":29,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":1},"end":{"line":5,"column":2}},"loc":{"start":{"line":5,"column":31},"end":{"line":8,"column":1}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":25},"end":{"line":13,"column":5}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":25},"end":{"line":20,"column":5}},"line":17},"3":{"name":"(anonymous_3)","decl":{"start":{"line":24,"column":4},"end":{"line":24,"column":5}},"loc":{"start":{"line":24,"column":25},"end":{"line":27,"column":5}},"line":24}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":24},"end":{"line":8,"column":87}},"type":"binary-expr","locations":[{"start":{"line":8,"column":24},"end":{"line":8,"column":50}},{"start":{"line":8,"column":55},"end":{"line":8,"column":86}}],"line":8}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":1,"8":0,"9":0,"10":1,"11":0,"12":0,"13":1},"f":{"0":1,"1":0,"2":0,"3":0},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/controller/IInsightFacade.ts","sources":["/Users/evan/Documents/Projects/2022/cpsc310-project/src/controller/IInsightFacade.ts"],"names":[],"mappings":";;;AAMA,IAAY,kBAGX;AAHD,WAAY,kBAAkB;IAC7B,yCAAmB,CAAA;IACnB,qCAAe,CAAA;AAChB,CAAC,EAHW,kBAAkB,GAAlB,0BAAkB,KAAlB,0BAAkB,QAG7B;AAYD,MAAa,YAAa,SAAQ,KAAK;IACtC,YAAY,OAAgB;QAC3B,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,KAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;IAC7C,CAAC;CACD;AALD,oCAKC;AAED,MAAa,aAAc,SAAQ,KAAK;IACvC,YAAY,OAAgB;QAC3B,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,KAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;IAC9C,CAAC;CACD;AALD,sCAKC;AAED,MAAa,mBAAoB,SAAQ,KAAK;IAC7C,YAAY,OAAgB;QAC3B,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,KAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE,mBAAmB,CAAC,CAAC;IACpD,CAAC;CACD;AALD,kDAKC","sourcesContent":["/*\r\n * This is the primary high-level API for the project. In this folder there should be:\r\n * A class called InsightFacade, this should be in a file called InsightFacade.ts.\r\n * You should not change this interface at all or the test suite will not work.\r\n */\r\n\r\nexport enum InsightDatasetKind {\r\n\tCourses = \"courses\",\r\n\tRooms = \"rooms\",\r\n}\r\n\r\nexport interface InsightDataset {\r\n\tid: string;\r\n\tkind: InsightDatasetKind;\r\n\tnumRows: number;\r\n}\r\n\r\nexport interface InsightResult {\r\n\t[key: string]: string | number;\r\n}\r\n\r\nexport class InsightError extends Error {\r\n\tconstructor(message?: string) {\r\n\t\tsuper(message);\r\n\t\tError.captureStackTrace(this, InsightError);\r\n\t}\r\n}\r\n\r\nexport class NotFoundError extends Error {\r\n\tconstructor(message?: string) {\r\n\t\tsuper(message);\r\n\t\tError.captureStackTrace(this, NotFoundError);\r\n\t}\r\n}\r\n\r\nexport class ResultTooLargeError extends Error {\r\n\tconstructor(message?: string) {\r\n\t\tsuper(message);\r\n\t\tError.captureStackTrace(this, ResultTooLargeError);\r\n\t}\r\n}\r\n\r\nexport interface IInsightFacade {\r\n\t/**\r\n\t * Add a dataset to insightUBC.\r\n\t *\r\n\t * @param id  The id of the dataset being added. Follows the format /^[^_]+$/\r\n\t * @param content  The base64 content of the dataset. This content should be in the form of a serialized zip file.\r\n\t * @param kind  The kind of the dataset\r\n\t *\r\n\t * @return Promise <string[]>\r\n\t *\r\n\t * The promise should fulfill on a successful add, reject for any failures.\r\n\t * The promise should fulfill with a string array,\r\n\t * containing the ids of all currently added datasets upon a successful add.\r\n\t * The promise should reject with an InsightError describing the error.\r\n\t *\r\n\t * An id is invalid if it contains an underscore, or is only whitespace characters.\r\n\t * If id is the same as the id of an already added dataset, the dataset should be rejected and not saved.\r\n\t *\r\n\t * After receiving the dataset, it should be processed into a data structure of\r\n\t * your design. The processed data structure should be persisted to disk; your\r\n\t * system should be able to load this persisted value into memory for answering\r\n\t * queries.\r\n\t *\r\n\t * Ultimately, a dataset must be added or loaded from disk before queries can\r\n\t * be successfully answered.\r\n\t */\r\n\taddDataset(id: string, content: string, kind: InsightDatasetKind): Promise<string[]>;\r\n\r\n\t/**\r\n\t * Remove a dataset from insightUBC.\r\n\t *\r\n\t * @param id  The id of the dataset to remove. Follows the format /^[^_]+$/\r\n\t *\r\n\t * @return Promise <string>\r\n\t *\r\n\t * The promise should fulfill upon a successful removal, reject on any error.\r\n\t * Attempting to remove a dataset that hasn't been added yet counts as an error.\r\n\t *\r\n\t * An id is invalid if it contains an underscore, or is only whitespace characters.\r\n\t *\r\n\t * The promise should fulfill the id of the dataset that was removed.\r\n\t * The promise should reject with a NotFoundError (if a valid id was not yet added)\r\n\t * or an InsightError (invalid id or any other source of failure) describing the error.\r\n\t *\r\n\t * This will delete both disk and memory caches for the dataset for the id meaning\r\n\t * that subsequent queries for that id should fail unless a new addDataset happens first.\r\n\t */\r\n\tremoveDataset(id: string): Promise<string>;\r\n\r\n\t/**\r\n\t * Perform a query on insightUBC.\r\n\t *\r\n\t * @param query  The query to be performed.\r\n\t *\r\n\t * If a query is incorrectly formatted, references a dataset not added (in memory or on disk),\r\n\t * or references multiple datasets, it should be rejected.\r\n\t *\r\n\t * @return Promise <InsightResult[]>\r\n\t *\r\n\t * The promise should fulfill with an array of results.\r\n\t * The promise should reject with a ResultTooLargeError (if the query returns too many results)\r\n\t * or an InsightError (for any other source of failure) describing the error.\r\n\t */\r\n\tperformQuery(query: unknown): Promise<InsightResult[]>;\r\n\r\n\t/**\r\n\t * List all currently added datasets, their types, and number of rows.\r\n\t *\r\n\t * @return Promise <InsightDataset[]>\r\n\t * The promise should fulfill an array of currently added InsightDatasets, and will only fulfill.\r\n\t */\r\n\tlistDatasets(): Promise<InsightDataset[]>;\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"5b14ab8f1ff464f78fc276549fde75b1855e8c46","contentHash":"3c8dd05c4c312afef42b65701ac3b1cff20bcf5f00b83c35eb5793b9a1459e20"},"/Users/evan/Documents/Projects/2022/cpsc310-project/src/controller/InsightFacade.ts":{"path":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/controller/InsightFacade.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":25},"end":{"line":6,"column":52}},"4":{"start":{"line":7,"column":27},"end":{"line":7,"column":66}},"5":{"start":{"line":8,"column":18},"end":{"line":8,"column":62}},"6":{"start":{"line":9,"column":15},"end":{"line":9,"column":39}},"7":{"start":{"line":10,"column":16},"end":{"line":10,"column":41}},"8":{"start":{"line":11,"column":22},"end":{"line":11,"column":56}},"9":{"start":{"line":14,"column":8},"end":{"line":14,"column":63}},"10":{"start":{"line":15,"column":8},"end":{"line":15,"column":49}},"11":{"start":{"line":18,"column":8},"end":{"line":18,"column":63}},"12":{"start":{"line":18,"column":51},"end":{"line":18,"column":61}},"13":{"start":{"line":21,"column":8},"end":{"line":48,"column":11}},"14":{"start":{"line":23,"column":12},"end":{"line":25,"column":13}},"15":{"start":{"line":24,"column":16},"end":{"line":24,"column":79}},"16":{"start":{"line":26,"column":12},"end":{"line":28,"column":13}},"17":{"start":{"line":27,"column":16},"end":{"line":27,"column":90}},"18":{"start":{"line":29,"column":12},"end":{"line":37,"column":13}},"19":{"start":{"line":30,"column":16},"end":{"line":30,"column":70}},"20":{"start":{"line":32,"column":17},"end":{"line":37,"column":13}},"21":{"start":{"line":33,"column":16},"end":{"line":33,"column":68}},"22":{"start":{"line":36,"column":16},"end":{"line":36,"column":82}},"23":{"start":{"line":38,"column":26},"end":{"line":38,"column":57}},"24":{"start":{"line":39,"column":12},"end":{"line":47,"column":15}},"25":{"start":{"line":40,"column":16},"end":{"line":40,"column":38}},"26":{"start":{"line":41,"column":16},"end":{"line":41,"column":45}},"27":{"start":{"line":42,"column":16},"end":{"line":42,"column":49}},"28":{"start":{"line":43,"column":16},"end":{"line":43,"column":75}},"29":{"start":{"line":44,"column":16},"end":{"line":44,"column":58}},"30":{"start":{"line":46,"column":16},"end":{"line":46,"column":70}},"31":{"start":{"line":51,"column":8},"end":{"line":60,"column":11}},"32":{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},"33":{"start":{"line":53,"column":16},"end":{"line":53,"column":79}},"34":{"start":{"line":55,"column":12},"end":{"line":57,"column":13}},"35":{"start":{"line":56,"column":16},"end":{"line":56,"column":91}},"36":{"start":{"line":58,"column":12},"end":{"line":58,"column":91}},"37":{"start":{"line":58,"column":72},"end":{"line":58,"column":89}},"38":{"start":{"line":59,"column":12},"end":{"line":59,"column":89}},"39":{"start":{"line":59,"column":76},"end":{"line":59,"column":87}},"40":{"start":{"line":63,"column":26},"end":{"line":63,"column":28}},"41":{"start":{"line":64,"column":8},"end":{"line":75,"column":11}},"42":{"start":{"line":66,"column":12},"end":{"line":73,"column":13}},"43":{"start":{"line":67,"column":16},"end":{"line":71,"column":18}},"44":{"start":{"line":72,"column":16},"end":{"line":72,"column":49}},"45":{"start":{"line":74,"column":12},"end":{"line":74,"column":40}},"46":{"start":{"line":78,"column":26},"end":{"line":78,"column":61}},"47":{"start":{"line":79,"column":24},"end":{"line":79,"column":62}},"48":{"start":{"line":80,"column":8},"end":{"line":82,"column":9}},"49":{"start":{"line":81,"column":12},"end":{"line":81,"column":87}},"50":{"start":{"line":83,"column":26},"end":{"line":83,"column":63}},"51":{"start":{"line":84,"column":33},"end":{"line":84,"column":60}},"52":{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},"53":{"start":{"line":86,"column":12},"end":{"line":86,"column":90}},"54":{"start":{"line":88,"column":8},"end":{"line":88,"column":51}},"55":{"start":{"line":91,"column":0},"end":{"line":91,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":18},"end":{"line":16,"column":5}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":25},"end":{"line":19,"column":5}},"line":17},"3":{"name":"(anonymous_3)","decl":{"start":{"line":18,"column":38},"end":{"line":18,"column":39}},"loc":{"start":{"line":18,"column":51},"end":{"line":18,"column":61}},"line":18},"4":{"name":"(anonymous_4)","decl":{"start":{"line":20,"column":4},"end":{"line":20,"column":5}},"loc":{"start":{"line":20,"column":34},"end":{"line":49,"column":5}},"line":20},"5":{"name":"(anonymous_5)","decl":{"start":{"line":21,"column":27},"end":{"line":21,"column":28}},"loc":{"start":{"line":21,"column":48},"end":{"line":48,"column":9}},"line":21},"6":{"name":"(anonymous_6)","decl":{"start":{"line":39,"column":39},"end":{"line":39,"column":40}},"loc":{"start":{"line":39,"column":57},"end":{"line":45,"column":13}},"line":39},"7":{"name":"(anonymous_7)","decl":{"start":{"line":45,"column":21},"end":{"line":45,"column":22}},"loc":{"start":{"line":45,"column":30},"end":{"line":47,"column":13}},"line":45},"8":{"name":"(anonymous_8)","decl":{"start":{"line":50,"column":4},"end":{"line":50,"column":5}},"loc":{"start":{"line":50,"column":22},"end":{"line":61,"column":5}},"line":50},"9":{"name":"(anonymous_9)","decl":{"start":{"line":51,"column":27},"end":{"line":51,"column":28}},"loc":{"start":{"line":51,"column":48},"end":{"line":60,"column":9}},"line":51},"10":{"name":"(anonymous_10)","decl":{"start":{"line":58,"column":59},"end":{"line":58,"column":60}},"loc":{"start":{"line":58,"column":72},"end":{"line":58,"column":89}},"line":58},"11":{"name":"(anonymous_11)","decl":{"start":{"line":59,"column":70},"end":{"line":59,"column":71}},"loc":{"start":{"line":59,"column":76},"end":{"line":59,"column":87}},"line":59},"12":{"name":"(anonymous_12)","decl":{"start":{"line":62,"column":4},"end":{"line":62,"column":5}},"loc":{"start":{"line":62,"column":19},"end":{"line":76,"column":5}},"line":62},"13":{"name":"(anonymous_13)","decl":{"start":{"line":64,"column":27},"end":{"line":64,"column":28}},"loc":{"start":{"line":64,"column":40},"end":{"line":75,"column":9}},"line":64},"14":{"name":"(anonymous_14)","decl":{"start":{"line":77,"column":4},"end":{"line":77,"column":5}},"loc":{"start":{"line":77,"column":24},"end":{"line":89,"column":5}},"line":77}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":23,"column":12},"end":{"line":25,"column":13}},"type":"if","locations":[{"start":{"line":23,"column":12},"end":{"line":25,"column":13}},{"start":{"line":23,"column":12},"end":{"line":25,"column":13}}],"line":23},"4":{"loc":{"start":{"line":23,"column":16},"end":{"line":23,"column":72}},"type":"binary-expr","locations":[{"start":{"line":23,"column":16},"end":{"line":23,"column":26}},{"start":{"line":23,"column":30},"end":{"line":23,"column":46}},{"start":{"line":23,"column":50},"end":{"line":23,"column":72}}],"line":23},"5":{"loc":{"start":{"line":26,"column":12},"end":{"line":28,"column":13}},"type":"if","locations":[{"start":{"line":26,"column":12},"end":{"line":28,"column":13}},{"start":{"line":26,"column":12},"end":{"line":28,"column":13}}],"line":26},"6":{"loc":{"start":{"line":29,"column":12},"end":{"line":37,"column":13}},"type":"if","locations":[{"start":{"line":29,"column":12},"end":{"line":37,"column":13}},{"start":{"line":29,"column":12},"end":{"line":37,"column":13}}],"line":29},"7":{"loc":{"start":{"line":32,"column":17},"end":{"line":37,"column":13}},"type":"if","locations":[{"start":{"line":32,"column":17},"end":{"line":37,"column":13}},{"start":{"line":32,"column":17},"end":{"line":37,"column":13}}],"line":32},"8":{"loc":{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},"type":"if","locations":[{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},{"start":{"line":52,"column":12},"end":{"line":54,"column":13}}],"line":52},"9":{"loc":{"start":{"line":52,"column":16},"end":{"line":52,"column":72}},"type":"binary-expr","locations":[{"start":{"line":52,"column":16},"end":{"line":52,"column":26}},{"start":{"line":52,"column":30},"end":{"line":52,"column":46}},{"start":{"line":52,"column":50},"end":{"line":52,"column":72}}],"line":52},"10":{"loc":{"start":{"line":55,"column":12},"end":{"line":57,"column":13}},"type":"if","locations":[{"start":{"line":55,"column":12},"end":{"line":57,"column":13}},{"start":{"line":55,"column":12},"end":{"line":57,"column":13}}],"line":55},"11":{"loc":{"start":{"line":80,"column":8},"end":{"line":82,"column":9}},"type":"if","locations":[{"start":{"line":80,"column":8},"end":{"line":82,"column":9}},{"start":{"line":80,"column":8},"end":{"line":82,"column":9}}],"line":80},"12":{"loc":{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},"type":"if","locations":[{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},{"start":{"line":85,"column":8},"end":{"line":87,"column":9}}],"line":85}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0],"10":[0,0],"11":[0,0],"12":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/controller/InsightFacade.ts","sources":["/Users/evan/Documents/Projects/2022/cpsc310-project/src/controller/InsightFacade.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n\tIInsightFacade,\r\n\tInsightDataset,\r\n\tInsightDatasetKind,\r\n\tInsightError,\r\n\tInsightResult,\r\n\tNotFoundError, ResultTooLargeError\r\n} from \"./IInsightFacade\";\r\nimport {\r\n\tzipCoursesProcessor,\r\n\tzipRoomsProcessor\r\n} from \"../services/DatasetProcessor\";\r\n\r\nimport JSZip = require(\"jszip\");\r\nimport Dataset from \"../model/Dataset\";\r\nimport Section from \"../model/Section\";\r\nimport {\r\n\tQueryStructure, Filter, Options,\r\n\tLComparison, MComparison, SComparison, Negation,\r\n\tMKeyPair, Key, SKey, MKey, SKeyPair\r\n} from \"../model/QueryInterfaces\";\r\nimport {Utils} from \"../model/Utils\";\r\nimport {EBNF} from \"../model/EBNF\";\r\nimport {Query} from \"../model/Query\";\r\nimport {loadFromDisk, persistToDisk} from \"../services/DiskManager\";\r\n\r\n\r\n/**\r\n * This is the main programmatic entry point for the project.\r\n * Method documentation is in IInsightFacade\r\n *\r\n */\r\nexport default class InsightFacade implements IInsightFacade {\r\n\tpublic addedDatasets: Dataset[];\r\n\r\n\tconstructor() {\r\n\t\tthis.addedDatasets = loadFromDisk();\r\n\t\tconsole.log(\"InsightFacadeImpl::init()\");\r\n\t}\r\n\r\n\tpublic getAddedDatasetIds (): string[] {\r\n\t\treturn this.addedDatasets.map((dataset: Dataset) => dataset.id);\r\n\t}\r\n\r\n\tpublic addDataset(id: string, content: string, kind: InsightDatasetKind): Promise<string[]> {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tlet zipProcessor: any;\r\n\t\t\tif (id == null || id.includes(\"_\") || id.trim().length === 0) {\r\n\t\t\t\treturn reject(new InsightError(\"invalid id\"));\r\n\t\t\t}\r\n\t\t\tif (this.getAddedDatasetIds().includes(id)) {\r\n\t\t\t\treturn reject(new InsightError(\"dataset already added\"));\r\n\t\t\t}\r\n\t\t\tif (kind === InsightDatasetKind.Courses) {\r\n\t\t\t\tzipProcessor = zipCoursesProcessor;\r\n\t\t\t} else if (kind === InsightDatasetKind.Rooms) {\r\n\t\t\t\tzipProcessor = zipRoomsProcessor;\r\n\t\t\t} else {\r\n\t\t\t\treject(new InsightError(\"unknown dataset kind\"));\r\n\t\t\t}\r\n\t\t\tlet dataset: Dataset = new Dataset(id, kind);\r\n\t\t\tzipProcessor(content).then(async (result: any[]) => {\r\n\t\t\t\tdataset.data = result;\r\n\t\t\t\tdataset.size = result.length;\r\n\t\t\t\t// console.log(result.length);\r\n\t\t\t\tthis.addedDatasets.push(dataset);\r\n\t\t\t\tawait persistToDisk(this.addedDatasets);\r\n\t\t\t\treturn resolve(this.getAddedDatasetIds());\r\n\r\n\t\t\t}).catch((err: any) => {\r\n\t\t\t\treturn reject(new InsightError(err));\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tpublic removeDataset(id: string): Promise<string> {\r\n\t\treturn new Promise<string>((resolve, reject) => {\r\n\t\t\tif (id == null || id.includes(\"_\") || id.trim().length === 0) {\r\n\t\t\t\treturn reject(new InsightError(\"invalid id\"));\r\n\t\t\t}\r\n\t\t\tif (!this.getAddedDatasetIds().includes(id)) {\r\n\t\t\t\treturn reject(new NotFoundError(\"dataset not yet added\"));\r\n\t\t\t}\r\n\t\t\tthis.addedDatasets = this.addedDatasets.filter((dataset) => dataset.id !== id);\r\n\t\t\tpersistToDisk(this.addedDatasets).then(() => resolve(id));\r\n\t\t});\r\n\t}\r\n\r\n\tpublic listDatasets(): Promise<InsightDataset[]> {\r\n\t\tlet datasetList: InsightDataset[] = [];\r\n\t\treturn new Promise<InsightDataset[]>((resolve) => {\r\n\t\t\tlet insightDataset: InsightDataset;\r\n\t\t\tfor (const dataset of this.addedDatasets) {\r\n\t\t\t\tinsightDataset = {\r\n\t\t\t\t\tid: dataset.id,\r\n\t\t\t\t\tkind: dataset.kind,\r\n\t\t\t\t\tnumRows: dataset.size\r\n\t\t\t\t};\r\n\t\t\t\tdatasetList.push(insightDataset);\r\n\t\t\t}\r\n\t\t\treturn resolve(datasetList);\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tpublic performQuery(query: unknown): Promise<InsightResult[]> {\r\n\t\t// check data is valid\r\n\t\t// data should be valid upon checking valid EBNF, because mkey and skey check if item id exists\r\n\t\t// verify query is in valid EBNF form\r\n\t\t// if this executes, then that means that we already know query is a valid JSON object\r\n\t\tlet EBNFChecker = new EBNF(this.addedDatasets);\r\n\t\tlet validEBNF = EBNFChecker.checkQueryValidEBNF(query);\r\n\t\tif (!validEBNF) {\r\n\t\t\treturn Promise.reject(new InsightError(\"Invalid query.\"));\r\n\t\t}\r\n\t\tlet queryObject = new Query(this.addedDatasets);\r\n\t\tlet insightResultArray = queryObject.getQuery(query as QueryStructure);\r\n\r\n\t\tif (insightResultArray.length >= 5000) {\r\n\t\t\treturn Promise.reject(new ResultTooLargeError(\"Too Large.\"));\r\n\t\t}\r\n\r\n\t\treturn Promise.resolve(insightResultArray);\r\n\t}\r\n\r\n\r\n}\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1ee0c45d0060d4444891081cfc9dd01edad57141","contentHash":"339a062763102ff527425536d9f373c307aa749f9535ffed6efd93c20264a039"},"/Users/evan/Documents/Projects/2022/cpsc310-project/src/services/DatasetProcessor.ts":{"path":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/services/DatasetProcessor.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":156}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":62}},"5":{"start":{"line":8,"column":25},"end":{"line":8,"column":64}},"6":{"start":{"line":9,"column":16},"end":{"line":9,"column":49}},"7":{"start":{"line":10,"column":15},"end":{"line":10,"column":56}},"8":{"start":{"line":11,"column":0},"end":{"line":22,"column":2}},"9":{"start":{"line":23,"column":15},"end":{"line":23,"column":32}},"10":{"start":{"line":25,"column":19},"end":{"line":25,"column":33}},"11":{"start":{"line":26,"column":22},"end":{"line":26,"column":24}},"12":{"start":{"line":28,"column":4},"end":{"line":30,"column":5}},"13":{"start":{"line":29,"column":8},"end":{"line":29,"column":27}},"14":{"start":{"line":31,"column":4},"end":{"line":36,"column":5}},"15":{"start":{"line":32,"column":8},"end":{"line":35,"column":9}},"16":{"start":{"line":33,"column":12},"end":{"line":33,"column":54}},"17":{"start":{"line":34,"column":12},"end":{"line":34,"column":44}},"18":{"start":{"line":37,"column":4},"end":{"line":37,"column":23}},"19":{"start":{"line":39,"column":0},"end":{"line":39,"column":34}},"20":{"start":{"line":41,"column":15},"end":{"line":41,"column":34}},"21":{"start":{"line":42,"column":13},"end":{"line":42,"column":31}},"22":{"start":{"line":43,"column":14},"end":{"line":43,"column":29}},"23":{"start":{"line":44,"column":21},"end":{"line":44,"column":42}},"24":{"start":{"line":45,"column":16},"end":{"line":45,"column":33}},"25":{"start":{"line":46,"column":15},"end":{"line":46,"column":31}},"26":{"start":{"line":47,"column":15},"end":{"line":47,"column":31}},"27":{"start":{"line":48,"column":16},"end":{"line":48,"column":33}},"28":{"start":{"line":49,"column":15},"end":{"line":49,"column":40}},"29":{"start":{"line":50,"column":15},"end":{"line":50,"column":90}},"30":{"start":{"line":51,"column":4},"end":{"line":51,"column":98}},"31":{"start":{"line":53,"column":0},"end":{"line":53,"column":36}},"32":{"start":{"line":55,"column":17},"end":{"line":55,"column":34}},"33":{"start":{"line":56,"column":25},"end":{"line":56,"column":56}},"34":{"start":{"line":57,"column":4},"end":{"line":61,"column":5}},"35":{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},"36":{"start":{"line":59,"column":12},"end":{"line":59,"column":25}},"37":{"start":{"line":62,"column":4},"end":{"line":62,"column":16}},"38":{"start":{"line":64,"column":0},"end":{"line":64,"column":40}},"39":{"start":{"line":66,"column":19},"end":{"line":66,"column":40}},"40":{"start":{"line":67,"column":19},"end":{"line":67,"column":26}},"41":{"start":{"line":68,"column":4},"end":{"line":91,"column":7}},"42":{"start":{"line":70,"column":8},"end":{"line":72,"column":9}},"43":{"start":{"line":71,"column":12},"end":{"line":71,"column":112}},"44":{"start":{"line":73,"column":8},"end":{"line":75,"column":12}},"45":{"start":{"line":74,"column":12},"end":{"line":74,"column":48}},"46":{"start":{"line":76,"column":8},"end":{"line":87,"column":11}},"47":{"start":{"line":77,"column":30},"end":{"line":77,"column":32}},"48":{"start":{"line":78,"column":12},"end":{"line":82,"column":13}},"49":{"start":{"line":79,"column":29},"end":{"line":79,"column":51}},"50":{"start":{"line":80,"column":31},"end":{"line":80,"column":48}},"51":{"start":{"line":81,"column":16},"end":{"line":81,"column":58}},"52":{"start":{"line":83,"column":12},"end":{"line":85,"column":13}},"53":{"start":{"line":84,"column":16},"end":{"line":84,"column":109}},"54":{"start":{"line":86,"column":12},"end":{"line":86,"column":31}},"55":{"start":{"line":90,"column":8},"end":{"line":90,"column":94}},"56":{"start":{"line":93,"column":0},"end":{"line":93,"column":50}},"57":{"start":{"line":95,"column":19},"end":{"line":95,"column":40}},"58":{"start":{"line":96,"column":19},"end":{"line":96,"column":26}},"59":{"start":{"line":97,"column":4},"end":{"line":121,"column":7}},"60":{"start":{"line":99,"column":31},"end":{"line":99,"column":50}},"61":{"start":{"line":100,"column":8},"end":{"line":102,"column":9}},"62":{"start":{"line":101,"column":12},"end":{"line":101,"column":110}},"63":{"start":{"line":103,"column":26},"end":{"line":103,"column":58}},"64":{"start":{"line":104,"column":8},"end":{"line":106,"column":9}},"65":{"start":{"line":105,"column":12},"end":{"line":105,"column":96}},"66":{"start":{"line":107,"column":8},"end":{"line":107,"column":49}},"67":{"start":{"line":108,"column":8},"end":{"line":117,"column":11}},"68":{"start":{"line":109,"column":12},"end":{"line":109,"column":55}},"69":{"start":{"line":111,"column":12},"end":{"line":113,"column":13}},"70":{"start":{"line":112,"column":16},"end":{"line":112,"column":96}},"71":{"start":{"line":114,"column":12},"end":{"line":114,"column":42}},"72":{"start":{"line":116,"column":12},"end":{"line":116,"column":102}},"73":{"start":{"line":120,"column":8},"end":{"line":120,"column":70}},"74":{"start":{"line":123,"column":0},"end":{"line":123,"column":46}},"75":{"start":{"line":125,"column":4},"end":{"line":164,"column":7}},"76":{"start":{"line":126,"column":27},"end":{"line":126,"column":34}},"77":{"start":{"line":127,"column":25},"end":{"line":127,"column":47}},"78":{"start":{"line":128,"column":22},"end":{"line":128,"column":54}},"79":{"start":{"line":129,"column":23},"end":{"line":129,"column":25}},"80":{"start":{"line":130,"column":8},"end":{"line":155,"column":9}},"81":{"start":{"line":131,"column":12},"end":{"line":154,"column":13}},"82":{"start":{"line":132,"column":30},"end":{"line":132,"column":34}},"83":{"start":{"line":132,"column":43},"end":{"line":132,"column":47}},"84":{"start":{"line":132,"column":56},"end":{"line":132,"column":60}},"85":{"start":{"line":132,"column":73},"end":{"line":132,"column":77}},"86":{"start":{"line":133,"column":16},"end":{"line":150,"column":17}},"87":{"start":{"line":134,"column":20},"end":{"line":149,"column":21}},"88":{"start":{"line":135,"column":38},"end":{"line":135,"column":61}},"89":{"start":{"line":136,"column":24},"end":{"line":148,"column":25}},"90":{"start":{"line":137,"column":28},"end":{"line":137,"column":74}},"91":{"start":{"line":139,"column":29},"end":{"line":148,"column":25}},"92":{"start":{"line":140,"column":38},"end":{"line":140,"column":66}},"93":{"start":{"line":141,"column":28},"end":{"line":141,"column":59}},"94":{"start":{"line":142,"column":28},"end":{"line":144,"column":29}},"95":{"start":{"line":143,"column":32},"end":{"line":143,"column":72}},"96":{"start":{"line":146,"column":29},"end":{"line":148,"column":25}},"97":{"start":{"line":147,"column":28},"end":{"line":147,"column":71}},"98":{"start":{"line":151,"column":16},"end":{"line":153,"column":17}},"99":{"start":{"line":152,"column":20},"end":{"line":152,"column":100}},"100":{"start":{"line":156,"column":8},"end":{"line":163,"column":11}},"101":{"start":{"line":157,"column":12},"end":{"line":161,"column":13}},"102":{"start":{"line":158,"column":16},"end":{"line":160,"column":17}},"103":{"start":{"line":159,"column":20},"end":{"line":159,"column":56}},"104":{"start":{"line":162,"column":12},"end":{"line":162,"column":37}},"105":{"start":{"line":167,"column":4},"end":{"line":169,"column":5}},"106":{"start":{"line":168,"column":8},"end":{"line":168,"column":20}},"107":{"start":{"line":170,"column":4},"end":{"line":172,"column":5}},"108":{"start":{"line":171,"column":8},"end":{"line":171,"column":24}},"109":{"start":{"line":173,"column":4},"end":{"line":178,"column":5}},"110":{"start":{"line":174,"column":19},"end":{"line":174,"column":53}},"111":{"start":{"line":175,"column":8},"end":{"line":177,"column":9}},"112":{"start":{"line":176,"column":12},"end":{"line":176,"column":24}},"113":{"start":{"line":179,"column":4},"end":{"line":179,"column":16}},"114":{"start":{"line":182,"column":16},"end":{"line":182,"column":18}},"115":{"start":{"line":183,"column":4},"end":{"line":205,"column":7}},"116":{"start":{"line":184,"column":28},"end":{"line":184,"column":51}},"117":{"start":{"line":185,"column":24},"end":{"line":189,"column":10}},"118":{"start":{"line":186,"column":12},"end":{"line":186,"column":37}},"119":{"start":{"line":188,"column":12},"end":{"line":188,"column":48}},"120":{"start":{"line":190,"column":8},"end":{"line":204,"column":11}},"121":{"start":{"line":191,"column":12},"end":{"line":199,"column":13}},"122":{"start":{"line":192,"column":16},"end":{"line":198,"column":17}},"123":{"start":{"line":193,"column":20},"end":{"line":197,"column":21}},"124":{"start":{"line":194,"column":41},"end":{"line":194,"column":82}},"125":{"start":{"line":195,"column":35},"end":{"line":195,"column":108}},"126":{"start":{"line":196,"column":24},"end":{"line":196,"column":41}},"127":{"start":{"line":201,"column":12},"end":{"line":201,"column":27}},"128":{"start":{"line":203,"column":12},"end":{"line":203,"column":59}},"129":{"start":{"line":208,"column":17},"end":{"line":208,"column":21}},"130":{"start":{"line":208,"column":34},"end":{"line":208,"column":38}},"131":{"start":{"line":208,"column":52},"end":{"line":208,"column":56}},"132":{"start":{"line":208,"column":65},"end":{"line":208,"column":69}},"133":{"start":{"line":209,"column":4},"end":{"line":226,"column":5}},"134":{"start":{"line":210,"column":8},"end":{"line":225,"column":9}},"135":{"start":{"line":211,"column":26},"end":{"line":211,"column":50}},"136":{"start":{"line":212,"column":12},"end":{"line":224,"column":13}},"137":{"start":{"line":213,"column":26},"end":{"line":213,"column":55}},"138":{"start":{"line":214,"column":16},"end":{"line":214,"column":47}},"139":{"start":{"line":216,"column":17},"end":{"line":224,"column":13}},"140":{"start":{"line":217,"column":16},"end":{"line":217,"column":64}},"141":{"start":{"line":219,"column":17},"end":{"line":224,"column":13}},"142":{"start":{"line":220,"column":16},"end":{"line":220,"column":65}},"143":{"start":{"line":222,"column":17},"end":{"line":224,"column":13}},"144":{"start":{"line":223,"column":16},"end":{"line":223,"column":60}},"145":{"start":{"line":227,"column":15},"end":{"line":227,"column":34}},"146":{"start":{"line":228,"column":4},"end":{"line":228,"column":136}},"147":{"start":{"line":231,"column":4},"end":{"line":252,"column":7}},"148":{"start":{"line":232,"column":19},"end":{"line":232,"column":34}},"149":{"start":{"line":233,"column":20},"end":{"line":233,"column":38}},"150":{"start":{"line":234,"column":8},"end":{"line":251,"column":11}},"151":{"start":{"line":235,"column":12},"end":{"line":235,"column":36}},"152":{"start":{"line":236,"column":26},"end":{"line":236,"column":28}},"153":{"start":{"line":237,"column":12},"end":{"line":239,"column":15}},"154":{"start":{"line":238,"column":16},"end":{"line":238,"column":33}},"155":{"start":{"line":240,"column":12},"end":{"line":248,"column":15}},"156":{"start":{"line":241,"column":16},"end":{"line":247,"column":17}},"157":{"start":{"line":242,"column":39},"end":{"line":242,"column":58}},"158":{"start":{"line":243,"column":20},"end":{"line":243,"column":40}},"159":{"start":{"line":246,"column":20},"end":{"line":246,"column":65}},"160":{"start":{"line":250,"column":12},"end":{"line":250,"column":57}},"161":{"start":{"line":255,"column":27},"end":{"line":255,"column":64}},"162":{"start":{"line":256,"column":16},"end":{"line":256,"column":96}},"163":{"start":{"line":257,"column":4},"end":{"line":257,"column":15}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"parseCourse","decl":{"start":{"line":24,"column":9},"end":{"line":24,"column":20}},"loc":{"start":{"line":24,"column":27},"end":{"line":38,"column":1}},"line":24},"2":{"name":"parseSection","decl":{"start":{"line":40,"column":9},"end":{"line":40,"column":21}},"loc":{"start":{"line":40,"column":35},"end":{"line":52,"column":1}},"line":40},"3":{"name":"isValidSection","decl":{"start":{"line":54,"column":9},"end":{"line":54,"column":23}},"loc":{"start":{"line":54,"column":30},"end":{"line":63,"column":1}},"line":54},"4":{"name":"zipCoursesProcessor","decl":{"start":{"line":65,"column":9},"end":{"line":65,"column":28}},"loc":{"start":{"line":65,"column":38},"end":{"line":92,"column":1}},"line":65},"5":{"name":"(anonymous_5)","decl":{"start":{"line":69,"column":14},"end":{"line":69,"column":15}},"loc":{"start":{"line":69,"column":23},"end":{"line":88,"column":5}},"line":69},"6":{"name":"(anonymous_6)","decl":{"start":{"line":73,"column":40},"end":{"line":73,"column":41}},"loc":{"start":{"line":73,"column":64},"end":{"line":75,"column":9}},"line":73},"7":{"name":"(anonymous_7)","decl":{"start":{"line":76,"column":42},"end":{"line":76,"column":43}},"loc":{"start":{"line":76,"column":55},"end":{"line":87,"column":9}},"line":76},"8":{"name":"(anonymous_8)","decl":{"start":{"line":89,"column":15},"end":{"line":89,"column":16}},"loc":{"start":{"line":89,"column":21},"end":{"line":91,"column":5}},"line":89},"9":{"name":"zipRoomsProcessor","decl":{"start":{"line":94,"column":9},"end":{"line":94,"column":26}},"loc":{"start":{"line":94,"column":36},"end":{"line":122,"column":1}},"line":94},"10":{"name":"(anonymous_10)","decl":{"start":{"line":98,"column":14},"end":{"line":98,"column":15}},"loc":{"start":{"line":98,"column":23},"end":{"line":118,"column":5}},"line":98},"11":{"name":"(anonymous_11)","decl":{"start":{"line":108,"column":42},"end":{"line":108,"column":43}},"loc":{"start":{"line":108,"column":53},"end":{"line":110,"column":9}},"line":108},"12":{"name":"(anonymous_12)","decl":{"start":{"line":110,"column":16},"end":{"line":110,"column":17}},"loc":{"start":{"line":110,"column":27},"end":{"line":115,"column":9}},"line":110},"13":{"name":"(anonymous_13)","decl":{"start":{"line":115,"column":17},"end":{"line":115,"column":18}},"loc":{"start":{"line":115,"column":26},"end":{"line":117,"column":9}},"line":115},"14":{"name":"(anonymous_14)","decl":{"start":{"line":119,"column":15},"end":{"line":119,"column":16}},"loc":{"start":{"line":119,"column":24},"end":{"line":121,"column":5}},"line":119},"15":{"name":"processIndex","decl":{"start":{"line":124,"column":9},"end":{"line":124,"column":21}},"loc":{"start":{"line":124,"column":45},"end":{"line":165,"column":1}},"line":124},"16":{"name":"(anonymous_16)","decl":{"start":{"line":125,"column":23},"end":{"line":125,"column":24}},"loc":{"start":{"line":125,"column":44},"end":{"line":164,"column":5}},"line":125},"17":{"name":"(anonymous_17)","decl":{"start":{"line":156,"column":39},"end":{"line":156,"column":40}},"loc":{"start":{"line":156,"column":52},"end":{"line":163,"column":9}},"line":156},"18":{"name":"getNodeHelper","decl":{"start":{"line":166,"column":9},"end":{"line":166,"column":22}},"loc":{"start":{"line":166,"column":43},"end":{"line":180,"column":1}},"line":166},"19":{"name":"parseBuilding","decl":{"start":{"line":181,"column":9},"end":{"line":181,"column":22}},"loc":{"start":{"line":181,"column":67},"end":{"line":206,"column":1}},"line":181},"20":{"name":"(anonymous_20)","decl":{"start":{"line":183,"column":23},"end":{"line":183,"column":24}},"loc":{"start":{"line":183,"column":44},"end":{"line":205,"column":5}},"line":183},"21":{"name":"(anonymous_21)","decl":{"start":{"line":185,"column":77},"end":{"line":185,"column":78}},"loc":{"start":{"line":185,"column":86},"end":{"line":187,"column":9}},"line":185},"22":{"name":"(anonymous_22)","decl":{"start":{"line":187,"column":16},"end":{"line":187,"column":17}},"loc":{"start":{"line":187,"column":26},"end":{"line":189,"column":9}},"line":187},"23":{"name":"(anonymous_23)","decl":{"start":{"line":190,"column":51},"end":{"line":190,"column":52}},"loc":{"start":{"line":190,"column":93},"end":{"line":200,"column":9}},"line":190},"24":{"name":"(anonymous_24)","decl":{"start":{"line":200,"column":16},"end":{"line":200,"column":17}},"loc":{"start":{"line":200,"column":22},"end":{"line":202,"column":9}},"line":200},"25":{"name":"(anonymous_25)","decl":{"start":{"line":202,"column":17},"end":{"line":202,"column":18}},"loc":{"start":{"line":202,"column":26},"end":{"line":204,"column":9}},"line":202},"26":{"name":"parseRoom","decl":{"start":{"line":207,"column":9},"end":{"line":207,"column":18}},"loc":{"start":{"line":207,"column":69},"end":{"line":229,"column":1}},"line":207},"27":{"name":"getGeoLocation","decl":{"start":{"line":230,"column":9},"end":{"line":230,"column":23}},"loc":{"start":{"line":230,"column":33},"end":{"line":253,"column":1}},"line":230},"28":{"name":"(anonymous_28)","decl":{"start":{"line":231,"column":23},"end":{"line":231,"column":24}},"loc":{"start":{"line":231,"column":44},"end":{"line":252,"column":5}},"line":231},"29":{"name":"(anonymous_29)","decl":{"start":{"line":234,"column":22},"end":{"line":234,"column":23}},"loc":{"start":{"line":234,"column":31},"end":{"line":249,"column":9}},"line":234},"30":{"name":"(anonymous_30)","decl":{"start":{"line":237,"column":27},"end":{"line":237,"column":28}},"loc":{"start":{"line":237,"column":38},"end":{"line":239,"column":13}},"line":237},"31":{"name":"(anonymous_31)","decl":{"start":{"line":240,"column":26},"end":{"line":240,"column":27}},"loc":{"start":{"line":240,"column":32},"end":{"line":248,"column":13}},"line":240},"32":{"name":"(anonymous_32)","decl":{"start":{"line":249,"column":23},"end":{"line":249,"column":24}},"loc":{"start":{"line":249,"column":30},"end":{"line":251,"column":9}},"line":249},"33":{"name":"encodeURL","decl":{"start":{"line":254,"column":9},"end":{"line":254,"column":18}},"loc":{"start":{"line":254,"column":28},"end":{"line":258,"column":1}},"line":254}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":28,"column":4},"end":{"line":30,"column":5}},"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":30,"column":5}},{"start":{"line":28,"column":4},"end":{"line":30,"column":5}}],"line":28},"4":{"loc":{"start":{"line":32,"column":8},"end":{"line":35,"column":9}},"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":35,"column":9}},{"start":{"line":32,"column":8},"end":{"line":35,"column":9}}],"line":32},"5":{"loc":{"start":{"line":50,"column":15},"end":{"line":50,"column":90}},"type":"cond-expr","locations":[{"start":{"line":50,"column":53},"end":{"line":50,"column":57}},{"start":{"line":50,"column":60},"end":{"line":50,"column":90}}],"line":50},"6":{"loc":{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},"type":"if","locations":[{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},{"start":{"line":58,"column":8},"end":{"line":60,"column":9}}],"line":58},"7":{"loc":{"start":{"line":70,"column":8},"end":{"line":72,"column":9}},"type":"if","locations":[{"start":{"line":70,"column":8},"end":{"line":72,"column":9}},{"start":{"line":70,"column":8},"end":{"line":72,"column":9}}],"line":70},"8":{"loc":{"start":{"line":83,"column":12},"end":{"line":85,"column":13}},"type":"if","locations":[{"start":{"line":83,"column":12},"end":{"line":85,"column":13}},{"start":{"line":83,"column":12},"end":{"line":85,"column":13}}],"line":83},"9":{"loc":{"start":{"line":100,"column":8},"end":{"line":102,"column":9}},"type":"if","locations":[{"start":{"line":100,"column":8},"end":{"line":102,"column":9}},{"start":{"line":100,"column":8},"end":{"line":102,"column":9}}],"line":100},"10":{"loc":{"start":{"line":104,"column":8},"end":{"line":106,"column":9}},"type":"if","locations":[{"start":{"line":104,"column":8},"end":{"line":106,"column":9}},{"start":{"line":104,"column":8},"end":{"line":106,"column":9}}],"line":104},"11":{"loc":{"start":{"line":111,"column":12},"end":{"line":113,"column":13}},"type":"if","locations":[{"start":{"line":111,"column":12},"end":{"line":113,"column":13}},{"start":{"line":111,"column":12},"end":{"line":113,"column":13}}],"line":111},"12":{"loc":{"start":{"line":131,"column":12},"end":{"line":154,"column":13}},"type":"if","locations":[{"start":{"line":131,"column":12},"end":{"line":154,"column":13}},{"start":{"line":131,"column":12},"end":{"line":154,"column":13}}],"line":131},"13":{"loc":{"start":{"line":134,"column":20},"end":{"line":149,"column":21}},"type":"if","locations":[{"start":{"line":134,"column":20},"end":{"line":149,"column":21}},{"start":{"line":134,"column":20},"end":{"line":149,"column":21}}],"line":134},"14":{"loc":{"start":{"line":136,"column":24},"end":{"line":148,"column":25}},"type":"if","locations":[{"start":{"line":136,"column":24},"end":{"line":148,"column":25}},{"start":{"line":136,"column":24},"end":{"line":148,"column":25}}],"line":136},"15":{"loc":{"start":{"line":139,"column":29},"end":{"line":148,"column":25}},"type":"if","locations":[{"start":{"line":139,"column":29},"end":{"line":148,"column":25}},{"start":{"line":139,"column":29},"end":{"line":148,"column":25}}],"line":139},"16":{"loc":{"start":{"line":142,"column":28},"end":{"line":144,"column":29}},"type":"if","locations":[{"start":{"line":142,"column":28},"end":{"line":144,"column":29}},{"start":{"line":142,"column":28},"end":{"line":144,"column":29}}],"line":142},"17":{"loc":{"start":{"line":142,"column":32},"end":{"line":142,"column":90}},"type":"binary-expr","locations":[{"start":{"line":142,"column":32},"end":{"line":142,"column":50}},{"start":{"line":142,"column":54},"end":{"line":142,"column":90}}],"line":142},"18":{"loc":{"start":{"line":146,"column":29},"end":{"line":148,"column":25}},"type":"if","locations":[{"start":{"line":146,"column":29},"end":{"line":148,"column":25}},{"start":{"line":146,"column":29},"end":{"line":148,"column":25}}],"line":146},"19":{"loc":{"start":{"line":151,"column":16},"end":{"line":153,"column":17}},"type":"if","locations":[{"start":{"line":151,"column":16},"end":{"line":153,"column":17}},{"start":{"line":151,"column":16},"end":{"line":153,"column":17}}],"line":151},"20":{"loc":{"start":{"line":151,"column":20},"end":{"line":151,"column":87}},"type":"binary-expr","locations":[{"start":{"line":151,"column":20},"end":{"line":151,"column":35}},{"start":{"line":151,"column":39},"end":{"line":151,"column":51}},{"start":{"line":151,"column":55},"end":{"line":151,"column":67}},{"start":{"line":151,"column":71},"end":{"line":151,"column":87}}],"line":151},"21":{"loc":{"start":{"line":157,"column":12},"end":{"line":161,"column":13}},"type":"if","locations":[{"start":{"line":157,"column":12},"end":{"line":161,"column":13}},{"start":{"line":157,"column":12},"end":{"line":161,"column":13}}],"line":157},"22":{"loc":{"start":{"line":167,"column":4},"end":{"line":169,"column":5}},"type":"if","locations":[{"start":{"line":167,"column":4},"end":{"line":169,"column":5}},{"start":{"line":167,"column":4},"end":{"line":169,"column":5}}],"line":167},"23":{"loc":{"start":{"line":167,"column":8},"end":{"line":167,"column":61}},"type":"binary-expr","locations":[{"start":{"line":167,"column":8},"end":{"line":167,"column":24}},{"start":{"line":167,"column":28},"end":{"line":167,"column":61}}],"line":167},"24":{"loc":{"start":{"line":170,"column":4},"end":{"line":172,"column":5}},"type":"if","locations":[{"start":{"line":170,"column":4},"end":{"line":172,"column":5}},{"start":{"line":170,"column":4},"end":{"line":172,"column":5}}],"line":170},"25":{"loc":{"start":{"line":175,"column":8},"end":{"line":177,"column":9}},"type":"if","locations":[{"start":{"line":175,"column":8},"end":{"line":177,"column":9}},{"start":{"line":175,"column":8},"end":{"line":177,"column":9}}],"line":175},"26":{"loc":{"start":{"line":191,"column":12},"end":{"line":199,"column":13}},"type":"if","locations":[{"start":{"line":191,"column":12},"end":{"line":199,"column":13}},{"start":{"line":191,"column":12},"end":{"line":199,"column":13}}],"line":191},"27":{"loc":{"start":{"line":191,"column":16},"end":{"line":191,"column":61}},"type":"binary-expr","locations":[{"start":{"line":191,"column":16},"end":{"line":191,"column":33}},{"start":{"line":191,"column":37},"end":{"line":191,"column":61}}],"line":191},"28":{"loc":{"start":{"line":193,"column":20},"end":{"line":197,"column":21}},"type":"if","locations":[{"start":{"line":193,"column":20},"end":{"line":197,"column":21}},{"start":{"line":193,"column":20},"end":{"line":197,"column":21}}],"line":193},"29":{"loc":{"start":{"line":210,"column":8},"end":{"line":225,"column":9}},"type":"if","locations":[{"start":{"line":210,"column":8},"end":{"line":225,"column":9}},{"start":{"line":210,"column":8},"end":{"line":225,"column":9}}],"line":210},"30":{"loc":{"start":{"line":212,"column":12},"end":{"line":224,"column":13}},"type":"if","locations":[{"start":{"line":212,"column":12},"end":{"line":224,"column":13}},{"start":{"line":212,"column":12},"end":{"line":224,"column":13}}],"line":212},"31":{"loc":{"start":{"line":216,"column":17},"end":{"line":224,"column":13}},"type":"if","locations":[{"start":{"line":216,"column":17},"end":{"line":224,"column":13}},{"start":{"line":216,"column":17},"end":{"line":224,"column":13}}],"line":216},"32":{"loc":{"start":{"line":219,"column":17},"end":{"line":224,"column":13}},"type":"if","locations":[{"start":{"line":219,"column":17},"end":{"line":224,"column":13}},{"start":{"line":219,"column":17},"end":{"line":224,"column":13}}],"line":219},"33":{"loc":{"start":{"line":222,"column":17},"end":{"line":224,"column":13}},"type":"if","locations":[{"start":{"line":222,"column":17},"end":{"line":224,"column":13}},{"start":{"line":222,"column":17},"end":{"line":224,"column":13}}],"line":222}},"s":{"0":1,"1":3,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":1,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":1,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":1,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0},"f":{"0":3,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0},"b":{"0":[1,1,1],"1":[2,1],"2":[3,3],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0,0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/services/DatasetProcessor.ts","sources":["/Users/evan/Documents/Projects/2022/cpsc310-project/src/services/DatasetProcessor.ts"],"names":[],"mappings":"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","sourcesContent":["import Section from \"../model/Section\";\r\nimport {InsightError} from \"../controller/IInsightFacade\";\r\n\r\nimport JSZip from \"jszip\";\r\nimport Room from \"../model/Room\";\r\n\r\n\r\nexport const keyMapping: any = {\r\n\tSubject: \"dept\",\r\n\tCourse: \"id\",\r\n\tAvg: \"avg\",\r\n\tProfessor: \"instructor\",\r\n\tTitle: \"title\",\r\n\tPass: \"pass\",\r\n\tFail: \"fail\",\r\n\tAudit: \"audit\",\r\n\tid: \"uuid\",\r\n\tYear: \"year\"\r\n};\r\n\r\nconst parse5 = require(\"parse5\");\r\n\r\nexport function parseCourse(json: any): Section[] {\r\n\tconst result = json[\"result\"];\r\n\tlet allSections: Section[] = [];\r\n\r\n\tlet parsedSection: Section;\r\n\tif (result === null) {\r\n\t\treturn allSections;\r\n\t}\r\n\tfor (const sectionData of result) {\r\n\t\tif (isValidSection(sectionData)) {\r\n\t\t\tparsedSection = parseSection(sectionData);\r\n\t\t\tallSections.push(parsedSection);\r\n\t\t}\r\n\t}\r\n\treturn allSections;\r\n}\r\n\r\n// parse a single section\r\nexport function parseSection(sectionData: any): any {\r\n\tlet dept = sectionData.Subject;\r\n\tlet id = sectionData.Course;\r\n\tlet avg = sectionData.Avg;\r\n\tlet instructor = sectionData.Professor;\r\n\tlet title = sectionData.Title;\r\n\tlet pass = sectionData.Pass;\r\n\tlet fail = sectionData.Fail;\r\n\tlet audit = sectionData.Audit;\r\n\tlet uuid = sectionData.id.toString();\r\n\tlet year = (sectionData.Session === \"overall\") ? 1900 : parseInt(sectionData.Year, 10);\r\n\treturn new Section(dept, id, avg, instructor, title, pass, fail, audit, uuid, year);\r\n}\r\n\r\nexport function isValidSection(json: any): boolean {\r\n\tconst keys: string[] = Object.keys(json);\r\n\tconst requiredKeys: string[] = Object.keys(keyMapping);\r\n\t// check if containing all keys required\r\n\tfor (const requiredKey of requiredKeys) {\r\n\t\t// console.log(requiredKey);\r\n\t\tif (!keys.includes(requiredKey)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nexport function zipCoursesProcessor(content: string): Promise<any[]> {\r\n\tconst newZip = new JSZip();\r\n\tlet promises = Array<Promise<string>>();\r\n\treturn newZip.loadAsync(content, {base64: true})\r\n\t\t.then((zip) => {\r\n\t\t\tif(zip.folder(/courses/).length === 0) {\r\n\t\t\t\treturn Promise.reject(new InsightError(\"no folder named courses in the zip file\"));\r\n\t\t\t}\r\n\t\t\tzip.folder(\"courses\")?.forEach(((relativePath, file) => {\r\n\t\t\t\tpromises.push(file.async(\"string\"));\r\n\t\t\t}));\r\n\t\t\treturn Promise.all(promises).then((promise: string[]) => {\r\n\t\t\t\tlet allSections: Section[] = [];\r\n\t\t\t\tfor (const courseData of promise) {\r\n\t\t\t\t\tconst json = JSON.parse(courseData);\r\n\t\t\t\t\tconst result = parseCourse(json);\r\n\t\t\t\t\tallSections = [...allSections, ...result];\r\n\t\t\t\t}\r\n\t\t\t\tif (allSections.length === 0) {\r\n\t\t\t\t\treturn Promise.reject(new InsightError(\"no valid section in this dataset\"));\r\n\t\t\t\t}\r\n\t\t\t\treturn allSections;\r\n\t\t\t});\r\n\t\t})\r\n\t\t.catch(() => {\r\n\t\t\treturn Promise.reject(new InsightError(\"error in loading zip file\"));\r\n\t\t});\r\n}\r\n\r\nexport function zipRoomsProcessor(content: string): Promise<any[]> {\r\n\tconst newZip = new JSZip();\r\n\tlet promises = Array<Promise<string>>();\r\n\treturn newZip.loadAsync(content, {base64: true})\r\n\t\t.then((zip) => {\r\n\t\t\tconst roomsFolderObj: any = zip.folder(\"rooms\");\r\n\t\t\tif(!roomsFolderObj) {\r\n\t\t\t\treturn Promise.reject(new InsightError(\"no folder named rooms in the zip file\"));\r\n\t\t\t}\r\n\t\t\tconst indexFile = roomsFolderObj.file(\"index.htm\");\r\n\t\t\tif(!indexFile) {\r\n\t\t\t\treturn Promise.reject(new InsightError(\"no file named index.htm\"));\r\n\t\t\t}\r\n\t\t\tpromises.push(indexFile.async(\"string\"));\r\n\t\t\treturn Promise.all(promises).then((files: string[]) => {\r\n\t\t\t\treturn processIndex(files, roomsFolderObj);\r\n\t\t\t}).then((rooms: any[]) => {\r\n\t\t\t\tif (rooms.length === 0) {\r\n\t\t\t\t\treturn Promise.reject(new InsightError(\"no valid room found\"));\r\n\t\t\t\t}\r\n\t\t\t\treturn Promise.resolve(rooms);\r\n\t\t\t}).catch((err) => {\r\n\t\t\t\treturn Promise.reject(new InsightError(\"error in getting rooms \" + err));\r\n\t\t\t});\r\n\t\t})\r\n\t\t.catch((err) => {\r\n\t\t\treturn Promise.reject(new InsightError(err));\r\n\t\t});\r\n}\r\n\r\nfunction processIndex(files: any[], roomsFolderObj: JSZip): Promise<any[]> {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tlet roomPromises = Array<Promise<any>>();\r\n\t\tconst document = parse5.parse(files[0]);\r\n\t\tconst tbody = getNodeHelper(document, \"tbody\");\r\n\t\tlet allRooms: Room[] = [];\r\n\t\tfor (let rowNode of tbody.childNodes) {\r\n\t\t\tif (rowNode.nodeName === \"tr\") {\r\n\t\t\t\tlet address: any = null, href: any = null, code: any = null, fullname: any = null;\r\n\t\t\t\tfor (let cellNode of rowNode.childNodes) {\r\n\t\t\t\t\tif (cellNode.nodeName === \"td\") {\r\n\t\t\t\t\t\tconst value = cellNode.attrs[0].value;\r\n\t\t\t\t\t\tif (value === \"views-field views-field-field-building-address\") {\r\n\t\t\t\t\t\t\taddress = cellNode.childNodes[0].value.trim();\r\n\t\t\t\t\t\t} else if (value === \"views-field views-field-title\") {\r\n\t\t\t\t\t\t\tconst a = getNodeHelper(cellNode, \"a\");\r\n\t\t\t\t\t\t\thref = a.attrs[0].value.trim();\r\n\t\t\t\t\t\t\tif (a.attrs.length > 1 && a.childNodes[0].nodeName === \"#text\") {\r\n\t\t\t\t\t\t\t\tfullname = a.childNodes[0].value.trim();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (value === \"views-field views-field-field-building-code\") {\r\n\t\t\t\t\t\t\tcode = cellNode.childNodes[0].value.trim();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (address != null && href != null && code != null && fullname != null) {\r\n\t\t\t\t\troomPromises.push(parseBuilding(address, href, code, fullname, roomsFolderObj));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tPromise.all(roomPromises).then((results: any[]) => {\r\n\t\t\tif (results.length > 0) {\r\n\t\t\t\tfor (let result of results) {\r\n\t\t\t\t\tallRooms = [...allRooms, ...result];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn resolve(allRooms);\r\n\t\t});\r\n\r\n\t});\r\n\r\n}\r\n\r\nfunction getNodeHelper(document: any, nodeName: any): any {\r\n\tif (document == null || document.childNodes === undefined) {\r\n\t\treturn null;\r\n\t}\r\n\tif (document.nodeName === nodeName) {\r\n\t\treturn document;\r\n\t}\r\n\tfor (let childNode of document.childNodes) {\r\n\t\tlet node = getNodeHelper(childNode, nodeName);\r\n\t\tif (node !== null) {\r\n\t\t\treturn node;\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction parseBuilding(address: string, href: string, code: string, fullname: string, roomsFolder: JSZip):\r\n\tPromise<any> {\r\n\tlet rooms: Room[] = [];\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tconst geoLocation = getGeoLocation(address);\r\n\t\tlet roomsData = roomsFolder?.file(href.slice(2))?.async(\"text\").then((str: string) => {\r\n\t\t\treturn parse5.parse(str);\r\n\t\t}).then((tree: any) => {\r\n\t\t\treturn getNodeHelper(tree, \"tbody\");\r\n\t\t});\r\n\t\tPromise.all([geoLocation, roomsData]).then(([resultGeoLocation, resultRoomsData]) => {\r\n\t\t\tif (resultGeoLocation && resultRoomsData !== null) {\r\n\t\t\t\tfor (let roomNode of resultRoomsData.childNodes) {\r\n\t\t\t\t\tif (roomNode.nodeName === \"tr\") {\r\n\t\t\t\t\t\tconst fullHref = \"http://students.ubc.ca/\" + href.slice(2);\r\n\t\t\t\t\t\tlet room: Room = parseRoom(roomNode, code, fullname, address, fullHref, resultGeoLocation);\r\n\t\t\t\t\t\trooms.push(room);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}).then(() => {\r\n\t\t\tresolve(rooms);\r\n\t\t}).catch((err) => {\r\n\t\t\treject(new InsightError(err));\r\n\t\t});\r\n\r\n\t});\r\n\r\n\r\n}\r\n\r\nfunction parseRoom(node: any, code: string, fullname: string, address: string, href: string, geoLocation: any): any {\r\n\tlet number: any = null, capacity: any = null, furniture: any = null, type: any = null;\r\n\tfor (let fieldNode of node.childNodes) {\r\n\t\tif (fieldNode.nodeName === \"td\") {\r\n\t\t\tconst value = fieldNode.attrs[0].value;\r\n\t\t\tif (value === \"views-field views-field-field-room-number\") {\r\n\t\t\t\tconst a = getNodeHelper(fieldNode, \"a\");\r\n\t\t\t\tnumber = a.childNodes[0].value;\r\n\t\t\t} else if (value === \"views-field views-field-field-room-capacity\") {\r\n\t\t\t\tcapacity = fieldNode.childNodes[0].value.trim();\r\n\t\t\t} else if (value === \"views-field views-field-field-room-furniture\") {\r\n\t\t\t\tfurniture = fieldNode.childNodes[0].value.trim();\r\n\t\t\t} else if (value === \"views-field views-field-field-room-type\") {\r\n\t\t\t\ttype = fieldNode.childNodes[0].value.trim();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tlet name = code + \"_\" + number;\r\n\treturn new Room(fullname, code, number, name, address,\r\n\t\tgeoLocation.lat, geoLocation.lon, capacity, type, furniture, href);\r\n}\r\n\r\nfunction getGeoLocation(address: string): Promise<any> {\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tlet http = require(\"http\");\r\n\t\tconst url = encodeURL(address);\r\n\t\t// citation: https://nodejs.org/api/http.html#httpgeturl-options-callback\r\n\t\thttp.get(url, (res: any) => {\r\n\t\t\tres.setEncoding(\"utf8\");\r\n\t\t\tlet rawData = \"\";\r\n\t\t\tres.on(\"data\", (chunk: any) => {\r\n\t\t\t\trawData += chunk;\r\n\t\t\t});\r\n\t\t\tres.on(\"end\", () => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst parsedData = JSON.parse(rawData);\r\n\t\t\t\t\tresolve(parsedData);\r\n\t\t\t\t} catch (e: any) {\r\n\t\t\t\t\treject(new InsightError(e));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}).on(\"error\", (e: any) => {\r\n\t\t\treject(new InsightError(e));\r\n\t\t});\r\n\t});\r\n}\r\n\r\nfunction encodeURL(address: string): string {\r\n\tconst encodedAddress =  address.trim().split(\" \").join(\"%20\");\r\n\tconst url = \"http://cs310.students.cs.ubc.ca:11316/api/v1/project_team617/\" + encodedAddress;\r\n\treturn url;\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"75006e4ca5e51c4e7690c0d3708374dfa167339c","contentHash":"371b08c37367d18929178575e8a6b08665dac88e08e62783937f75b4dbff9423"},"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Section.ts":{"path":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Section.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":25}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":21}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":23}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":37}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":27}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":25}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":25}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":27}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":25}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":25}},"11":{"start":{"line":17,"column":0},"end":{"line":17,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":81},"end":{"line":15,"column":5}},"line":4}},"branchMap":{},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Section.ts","sources":["/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Section.ts"],"names":[],"mappings":";;AAAA,MAAqB,OAAO;IAa3B,YAAY,IAAY,EAAE,EAAU,EAAE,GAAW,EAAE,UAAkB,EAAE,KAAa,EAAE,IAAY,EAAE,IAAY,EAC/G,KAAa,EAAE,IAAY,EAAE,IAAY;QACzC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACf,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IAClB,CAAC;CACD;AA1BD,0BA0BC","sourcesContent":["export default class Section {\r\n\r\n\tpublic dept: string;\r\n\tpublic id: string;\r\n\tpublic avg: number;\r\n\tpublic instructor: string;\r\n\tpublic title: string;\r\n\tpublic pass: number;\r\n\tpublic fail: number;\r\n\tpublic audit: number;\r\n\tpublic uuid: string;\r\n\tpublic year: number;\r\n\r\n\tconstructor(dept: string, id: string, avg: number, instructor: string, title: string, pass: number, fail: number,\r\n\t\taudit: number, uuid: string, year: number) {\r\n\t\tthis.dept = dept;\r\n\t\tthis.id = id;\r\n\t\tthis.avg = avg;\r\n\t\tthis.instructor = instructor;\r\n\t\tthis.title = title;\r\n\t\tthis.pass = pass;\r\n\t\tthis.fail = fail;\r\n\t\tthis.audit = audit;\r\n\t\tthis.uuid = uuid;\r\n\t\tthis.year = year;\r\n\t}\r\n}\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2f25fcd4b9426c6cea96dc8955ca493607c033d0","contentHash":"c523953e988f2dae3f91ef6ac3c8fc545b26fa0108d6a7c22d597cf9b5573344"},"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Room.ts":{"path":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Room.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":33}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":35}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":29}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":25}},"5":{"start":{"line":9,"column":8},"end":{"line":9,"column":31}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":23}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":23}},"8":{"start":{"line":12,"column":8},"end":{"line":12,"column":27}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":25}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":35}},"11":{"start":{"line":15,"column":8},"end":{"line":15,"column":25}},"12":{"start":{"line":18,"column":0},"end":{"line":18,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":100},"end":{"line":16,"column":5}},"line":4}},"branchMap":{},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Room.ts","sources":["/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Room.ts"],"names":[],"mappings":";;AAAA,MAAqB,IAAI;IAcxB,YAAY,QAAgB,EAAE,SAAiB,EAAE,MAAc,EAAE,IAAY,EAAE,OAAe,EAAE,GAAW,EAC1G,GAAW,EAAE,KAAa,EAAE,IAAY,EAAE,SAAiB,EAAE,IAAY;QACzE,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACf,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACf,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;QAC3B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IAClB,CAAC;CACD;AA5BD,uBA4BC","sourcesContent":["export default class Room {\r\n\r\n\tpublic fullname: string;\r\n\tpublic shortname: string;\r\n\tpublic number: string;\r\n\tpublic name: string;\r\n\tpublic address: string;\r\n\tpublic lat: number;\r\n\tpublic lon: number;\r\n\tpublic seats: number;\r\n\tpublic type: string;\r\n\tpublic furniture: string;\r\n\tpublic href: string;\r\n\r\n\tconstructor(fullname: string, shortname: string, number: string, name: string, address: string, lat: number,\r\n\t\tlon: number, seats: number, type: string, furniture: string, href: string) {\r\n\t\tthis.fullname = fullname;\r\n\t\tthis.shortname = shortname;\r\n\t\tthis.number = number;\r\n\t\tthis.name = name;\r\n\t\tthis.address = address;\r\n\t\tthis.lat = lat;\r\n\t\tthis.lon = lon;\r\n\t\tthis.seats = seats;\r\n\t\tthis.type = type;\r\n\t\tthis.furniture = furniture;\r\n\t\tthis.href = href;\r\n\t}\r\n}\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"edc0f28aea52d38ddf7ed245ec1d19de6b5f7e7c","contentHash":"9c476a539b753e50c1971f6a2d7e81404d1ccc46293636f62548a6f6f851b133"},"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Dataset.ts":{"path":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Dataset.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":21}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":25}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":23}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":22}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":26},"end":{"line":9,"column":5}},"line":4}},"branchMap":{},"s":{"0":1,"1":0,"2":0,"3":0,"4":0,"5":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Dataset.ts","sources":["/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Dataset.ts"],"names":[],"mappings":";;AAIA,MAAqB,OAAO;IAM3B,YAAY,EAAU,EAAE,IAAwB;QAC/C,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;QACf,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;IACf,CAAC;CACD;AAZD,0BAYC","sourcesContent":["import {InsightDatasetKind} from \"../controller/IInsightFacade\";\r\nimport Section from \"./Section\";\r\n\r\n\r\nexport default class Dataset {\r\n\tpublic id: string;\r\n\tpublic kind: InsightDatasetKind;\r\n\tpublic data: any[];\r\n\tpublic size: number;\r\n\r\n\tconstructor(id: string, kind: InsightDatasetKind) {\r\n\t\tthis.id = id;\r\n\t\tthis.kind = kind;\r\n\t\tthis.data = [];\r\n\t\tthis.size = 0;\r\n\t}\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1f095ca3b25d68ed9f05b3455e293e1f694e8274","contentHash":"0a42ced1e1591d2c90b63b5ea9564c105d884605d27b579a7f9012cc6cc90cf6"},"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/EBNF.ts":{"path":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/EBNF.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":22}},"2":{"start":{"line":4,"column":21},"end":{"line":4,"column":44}},"3":{"start":{"line":5,"column":16},"end":{"line":5,"column":34}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":33}},"5":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"6":{"start":{"line":12,"column":12},"end":{"line":12,"column":25}},"7":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"8":{"start":{"line":15,"column":12},"end":{"line":15,"column":25}},"9":{"start":{"line":17,"column":24},"end":{"line":17,"column":41}},"10":{"start":{"line":18,"column":27},"end":{"line":18,"column":46}},"11":{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},"12":{"start":{"line":20,"column":12},"end":{"line":20,"column":25}},"13":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"14":{"start":{"line":23,"column":12},"end":{"line":23,"column":25}},"15":{"start":{"line":25,"column":24},"end":{"line":25,"column":54}},"16":{"start":{"line":26,"column":27},"end":{"line":26,"column":63}},"17":{"start":{"line":27,"column":8},"end":{"line":27,"column":41}},"18":{"start":{"line":30,"column":21},"end":{"line":30,"column":25}},"19":{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},"20":{"start":{"line":32,"column":12},"end":{"line":32,"column":24}},"21":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"22":{"start":{"line":35,"column":12},"end":{"line":35,"column":25}},"23":{"start":{"line":37,"column":31},"end":{"line":37,"column":36}},"24":{"start":{"line":38,"column":31},"end":{"line":38,"column":36}},"25":{"start":{"line":39,"column":31},"end":{"line":39,"column":36}},"26":{"start":{"line":40,"column":28},"end":{"line":40,"column":33}},"27":{"start":{"line":41,"column":8},"end":{"line":52,"column":9}},"28":{"start":{"line":42,"column":12},"end":{"line":42,"column":65}},"29":{"start":{"line":44,"column":13},"end":{"line":52,"column":9}},"30":{"start":{"line":45,"column":12},"end":{"line":45,"column":61}},"31":{"start":{"line":47,"column":13},"end":{"line":52,"column":9}},"32":{"start":{"line":48,"column":12},"end":{"line":48,"column":61}},"33":{"start":{"line":50,"column":13},"end":{"line":52,"column":9}},"34":{"start":{"line":51,"column":12},"end":{"line":51,"column":55}},"35":{"start":{"line":53,"column":8},"end":{"line":53,"column":89}},"36":{"start":{"line":56,"column":29},"end":{"line":56,"column":44}},"37":{"start":{"line":57,"column":28},"end":{"line":57,"column":42}},"38":{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},"39":{"start":{"line":59,"column":12},"end":{"line":59,"column":25}},"40":{"start":{"line":61,"column":8},"end":{"line":63,"column":9}},"41":{"start":{"line":62,"column":12},"end":{"line":62,"column":25}},"42":{"start":{"line":64,"column":8},"end":{"line":66,"column":9}},"43":{"start":{"line":65,"column":12},"end":{"line":65,"column":25}},"44":{"start":{"line":67,"column":8},"end":{"line":69,"column":9}},"45":{"start":{"line":68,"column":12},"end":{"line":68,"column":25}},"46":{"start":{"line":70,"column":29},"end":{"line":70,"column":33}},"47":{"start":{"line":71,"column":28},"end":{"line":71,"column":32}},"48":{"start":{"line":72,"column":8},"end":{"line":79,"column":9}},"49":{"start":{"line":73,"column":12},"end":{"line":75,"column":13}},"50":{"start":{"line":74,"column":16},"end":{"line":74,"column":29}},"51":{"start":{"line":76,"column":12},"end":{"line":78,"column":15}},"52":{"start":{"line":77,"column":16},"end":{"line":77,"column":79}},"53":{"start":{"line":80,"column":8},"end":{"line":87,"column":9}},"54":{"start":{"line":81,"column":12},"end":{"line":83,"column":13}},"55":{"start":{"line":82,"column":16},"end":{"line":82,"column":29}},"56":{"start":{"line":84,"column":12},"end":{"line":86,"column":15}},"57":{"start":{"line":85,"column":16},"end":{"line":85,"column":77}},"58":{"start":{"line":88,"column":8},"end":{"line":88,"column":47}},"59":{"start":{"line":91,"column":27},"end":{"line":91,"column":41}},"60":{"start":{"line":92,"column":27},"end":{"line":92,"column":41}},"61":{"start":{"line":93,"column":27},"end":{"line":93,"column":41}},"62":{"start":{"line":94,"column":8},"end":{"line":96,"column":9}},"63":{"start":{"line":95,"column":12},"end":{"line":95,"column":25}},"64":{"start":{"line":97,"column":8},"end":{"line":99,"column":9}},"65":{"start":{"line":98,"column":12},"end":{"line":98,"column":25}},"66":{"start":{"line":100,"column":22},"end":{"line":100,"column":26}},"67":{"start":{"line":101,"column":22},"end":{"line":101,"column":26}},"68":{"start":{"line":102,"column":22},"end":{"line":102,"column":26}},"69":{"start":{"line":103,"column":8},"end":{"line":111,"column":9}},"70":{"start":{"line":104,"column":12},"end":{"line":106,"column":13}},"71":{"start":{"line":105,"column":16},"end":{"line":105,"column":29}},"72":{"start":{"line":107,"column":27},"end":{"line":107,"column":68}},"73":{"start":{"line":108,"column":23},"end":{"line":108,"column":57}},"74":{"start":{"line":109,"column":12},"end":{"line":110,"column":107}},"75":{"start":{"line":112,"column":8},"end":{"line":120,"column":9}},"76":{"start":{"line":113,"column":12},"end":{"line":115,"column":13}},"77":{"start":{"line":114,"column":16},"end":{"line":114,"column":29}},"78":{"start":{"line":116,"column":27},"end":{"line":116,"column":68}},"79":{"start":{"line":117,"column":23},"end":{"line":117,"column":57}},"80":{"start":{"line":118,"column":12},"end":{"line":119,"column":107}},"81":{"start":{"line":121,"column":8},"end":{"line":129,"column":9}},"82":{"start":{"line":122,"column":12},"end":{"line":124,"column":13}},"83":{"start":{"line":123,"column":16},"end":{"line":123,"column":29}},"84":{"start":{"line":125,"column":27},"end":{"line":125,"column":68}},"85":{"start":{"line":126,"column":23},"end":{"line":126,"column":57}},"86":{"start":{"line":127,"column":12},"end":{"line":128,"column":107}},"87":{"start":{"line":130,"column":8},"end":{"line":130,"column":45}},"88":{"start":{"line":133,"column":23},"end":{"line":133,"column":37}},"89":{"start":{"line":134,"column":8},"end":{"line":136,"column":9}},"90":{"start":{"line":135,"column":12},"end":{"line":135,"column":25}},"91":{"start":{"line":137,"column":23},"end":{"line":137,"column":60}},"92":{"start":{"line":138,"column":19},"end":{"line":138,"column":53}},"93":{"start":{"line":139,"column":30},"end":{"line":142,"column":87}},"94":{"start":{"line":143,"column":8},"end":{"line":143,"column":31}},"95":{"start":{"line":146,"column":28},"end":{"line":146,"column":40}},"96":{"start":{"line":147,"column":8},"end":{"line":149,"column":9}},"97":{"start":{"line":148,"column":12},"end":{"line":148,"column":25}},"98":{"start":{"line":150,"column":8},"end":{"line":150,"column":50}},"99":{"start":{"line":153,"column":27},"end":{"line":153,"column":42}},"100":{"start":{"line":154,"column":25},"end":{"line":154,"column":38}},"101":{"start":{"line":155,"column":8},"end":{"line":157,"column":9}},"102":{"start":{"line":156,"column":12},"end":{"line":156,"column":25}},"103":{"start":{"line":158,"column":27},"end":{"line":158,"column":63}},"104":{"start":{"line":159,"column":25},"end":{"line":159,"column":29}},"105":{"start":{"line":160,"column":8},"end":{"line":162,"column":9}},"106":{"start":{"line":161,"column":12},"end":{"line":161,"column":72}},"107":{"start":{"line":163,"column":8},"end":{"line":163,"column":42}},"108":{"start":{"line":166,"column":8},"end":{"line":168,"column":9}},"109":{"start":{"line":167,"column":12},"end":{"line":167,"column":25}},"110":{"start":{"line":169,"column":21},"end":{"line":169,"column":25}},"111":{"start":{"line":170,"column":8},"end":{"line":172,"column":11}},"112":{"start":{"line":171,"column":12},"end":{"line":171,"column":55}},"113":{"start":{"line":173,"column":8},"end":{"line":173,"column":22}},"114":{"start":{"line":176,"column":29},"end":{"line":176,"column":34}},"115":{"start":{"line":177,"column":8},"end":{"line":179,"column":11}},"116":{"start":{"line":178,"column":12},"end":{"line":178,"column":63}},"117":{"start":{"line":180,"column":8},"end":{"line":180,"column":59}},"118":{"start":{"line":183,"column":8},"end":{"line":185,"column":9}},"119":{"start":{"line":184,"column":12},"end":{"line":184,"column":25}},"120":{"start":{"line":186,"column":24},"end":{"line":186,"column":27}},"121":{"start":{"line":187,"column":19},"end":{"line":187,"column":28}},"122":{"start":{"line":188,"column":19},"end":{"line":188,"column":28}},"123":{"start":{"line":189,"column":8},"end":{"line":189,"column":128}},"124":{"start":{"line":192,"column":0},"end":{"line":192,"column":20}},"125":{"start":{"line":193,"column":0},"end":{"line":193,"column":55}},"126":{"start":{"line":194,"column":0},"end":{"line":194,"column":60}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":26},"end":{"line":9,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":37},"end":{"line":28,"column":5}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":29,"column":4},"end":{"line":29,"column":5}},"loc":{"start":{"line":29,"column":25},"end":{"line":54,"column":5}},"line":29},"3":{"name":"(anonymous_3)","decl":{"start":{"line":55,"column":4},"end":{"line":55,"column":5}},"loc":{"start":{"line":55,"column":38},"end":{"line":89,"column":5}},"line":55},"4":{"name":"(anonymous_4)","decl":{"start":{"line":76,"column":35},"end":{"line":76,"column":36}},"loc":{"start":{"line":76,"column":47},"end":{"line":78,"column":13}},"line":76},"5":{"name":"(anonymous_5)","decl":{"start":{"line":84,"column":34},"end":{"line":84,"column":35}},"loc":{"start":{"line":84,"column":46},"end":{"line":86,"column":13}},"line":84},"6":{"name":"(anonymous_6)","decl":{"start":{"line":90,"column":4},"end":{"line":90,"column":5}},"loc":{"start":{"line":90,"column":34},"end":{"line":131,"column":5}},"line":90},"7":{"name":"(anonymous_7)","decl":{"start":{"line":132,"column":4},"end":{"line":132,"column":5}},"loc":{"start":{"line":132,"column":34},"end":{"line":144,"column":5}},"line":132},"8":{"name":"(anonymous_8)","decl":{"start":{"line":145,"column":4},"end":{"line":145,"column":5}},"loc":{"start":{"line":145,"column":28},"end":{"line":151,"column":5}},"line":145},"9":{"name":"(anonymous_9)","decl":{"start":{"line":152,"column":4},"end":{"line":152,"column":5}},"loc":{"start":{"line":152,"column":31},"end":{"line":164,"column":5}},"line":152},"10":{"name":"(anonymous_10)","decl":{"start":{"line":165,"column":4},"end":{"line":165,"column":5}},"loc":{"start":{"line":165,"column":30},"end":{"line":174,"column":5}},"line":165},"11":{"name":"(anonymous_11)","decl":{"start":{"line":170,"column":23},"end":{"line":170,"column":24}},"loc":{"start":{"line":170,"column":32},"end":{"line":172,"column":9}},"line":170},"12":{"name":"(anonymous_12)","decl":{"start":{"line":175,"column":4},"end":{"line":175,"column":5}},"loc":{"start":{"line":175,"column":36},"end":{"line":181,"column":5}},"line":175},"13":{"name":"(anonymous_13)","decl":{"start":{"line":177,"column":24},"end":{"line":177,"column":25}},"loc":{"start":{"line":177,"column":33},"end":{"line":179,"column":9}},"line":177},"14":{"name":"(anonymous_14)","decl":{"start":{"line":182,"column":4},"end":{"line":182,"column":5}},"loc":{"start":{"line":182,"column":23},"end":{"line":190,"column":5}},"line":182}},"branchMap":{"0":{"loc":{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},"type":"if","locations":[{"start":{"line":11,"column":8},"end":{"line":13,"column":9}},{"start":{"line":11,"column":8},"end":{"line":13,"column":9}}],"line":11},"1":{"loc":{"start":{"line":11,"column":12},"end":{"line":11,"column":61}},"type":"binary-expr","locations":[{"start":{"line":11,"column":12},"end":{"line":11,"column":32}},{"start":{"line":11,"column":36},"end":{"line":11,"column":61}}],"line":11},"2":{"loc":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"type":"if","locations":[{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},{"start":{"line":14,"column":8},"end":{"line":16,"column":9}}],"line":14},"3":{"loc":{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},"type":"if","locations":[{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},{"start":{"line":19,"column":8},"end":{"line":21,"column":9}}],"line":19},"4":{"loc":{"start":{"line":19,"column":12},"end":{"line":19,"column":57}},"type":"binary-expr","locations":[{"start":{"line":19,"column":12},"end":{"line":19,"column":30}},{"start":{"line":19,"column":34},"end":{"line":19,"column":57}}],"line":19},"5":{"loc":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"type":"if","locations":[{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},{"start":{"line":22,"column":8},"end":{"line":24,"column":9}}],"line":22},"6":{"loc":{"start":{"line":22,"column":12},"end":{"line":22,"column":63}},"type":"binary-expr","locations":[{"start":{"line":22,"column":12},"end":{"line":22,"column":33}},{"start":{"line":22,"column":37},"end":{"line":22,"column":63}}],"line":22},"7":{"loc":{"start":{"line":27,"column":15},"end":{"line":27,"column":40}},"type":"binary-expr","locations":[{"start":{"line":27,"column":15},"end":{"line":27,"column":24}},{"start":{"line":27,"column":28},"end":{"line":27,"column":40}}],"line":27},"8":{"loc":{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},{"start":{"line":31,"column":8},"end":{"line":33,"column":9}}],"line":31},"9":{"loc":{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},"type":"if","locations":[{"start":{"line":34,"column":8},"end":{"line":36,"column":9}},{"start":{"line":34,"column":8},"end":{"line":36,"column":9}}],"line":34},"10":{"loc":{"start":{"line":34,"column":12},"end":{"line":34,"column":51}},"type":"binary-expr","locations":[{"start":{"line":34,"column":12},"end":{"line":34,"column":27}},{"start":{"line":34,"column":31},"end":{"line":34,"column":51}}],"line":34},"11":{"loc":{"start":{"line":41,"column":8},"end":{"line":52,"column":9}},"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":52,"column":9}},{"start":{"line":41,"column":8},"end":{"line":52,"column":9}}],"line":41},"12":{"loc":{"start":{"line":44,"column":13},"end":{"line":52,"column":9}},"type":"if","locations":[{"start":{"line":44,"column":13},"end":{"line":52,"column":9}},{"start":{"line":44,"column":13},"end":{"line":52,"column":9}}],"line":44},"13":{"loc":{"start":{"line":47,"column":13},"end":{"line":52,"column":9}},"type":"if","locations":[{"start":{"line":47,"column":13},"end":{"line":52,"column":9}},{"start":{"line":47,"column":13},"end":{"line":52,"column":9}}],"line":47},"14":{"loc":{"start":{"line":50,"column":13},"end":{"line":52,"column":9}},"type":"if","locations":[{"start":{"line":50,"column":13},"end":{"line":52,"column":9}},{"start":{"line":50,"column":13},"end":{"line":52,"column":9}}],"line":50},"15":{"loc":{"start":{"line":53,"column":15},"end":{"line":53,"column":88}},"type":"binary-expr","locations":[{"start":{"line":53,"column":15},"end":{"line":53,"column":31}},{"start":{"line":53,"column":35},"end":{"line":53,"column":51}},{"start":{"line":53,"column":55},"end":{"line":53,"column":71}},{"start":{"line":53,"column":75},"end":{"line":53,"column":88}}],"line":53},"16":{"loc":{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},"type":"if","locations":[{"start":{"line":58,"column":8},"end":{"line":60,"column":9}},{"start":{"line":58,"column":8},"end":{"line":60,"column":9}}],"line":58},"17":{"loc":{"start":{"line":58,"column":12},"end":{"line":58,"column":61}},"type":"binary-expr","locations":[{"start":{"line":58,"column":12},"end":{"line":58,"column":35}},{"start":{"line":58,"column":39},"end":{"line":58,"column":61}}],"line":58},"18":{"loc":{"start":{"line":61,"column":8},"end":{"line":63,"column":9}},"type":"if","locations":[{"start":{"line":61,"column":8},"end":{"line":63,"column":9}},{"start":{"line":61,"column":8},"end":{"line":63,"column":9}}],"line":61},"19":{"loc":{"start":{"line":61,"column":12},"end":{"line":61,"column":71}},"type":"binary-expr","locations":[{"start":{"line":61,"column":12},"end":{"line":61,"column":40}},{"start":{"line":61,"column":44},"end":{"line":61,"column":71}}],"line":61},"20":{"loc":{"start":{"line":64,"column":8},"end":{"line":66,"column":9}},"type":"if","locations":[{"start":{"line":64,"column":8},"end":{"line":66,"column":9}},{"start":{"line":64,"column":8},"end":{"line":66,"column":9}}],"line":64},"21":{"loc":{"start":{"line":64,"column":12},"end":{"line":64,"column":73}},"type":"binary-expr","locations":[{"start":{"line":64,"column":12},"end":{"line":64,"column":40}},{"start":{"line":64,"column":44},"end":{"line":64,"column":73}}],"line":64},"22":{"loc":{"start":{"line":67,"column":8},"end":{"line":69,"column":9}},"type":"if","locations":[{"start":{"line":67,"column":8},"end":{"line":69,"column":9}},{"start":{"line":67,"column":8},"end":{"line":69,"column":9}}],"line":67},"23":{"loc":{"start":{"line":67,"column":12},"end":{"line":67,"column":73}},"type":"binary-expr","locations":[{"start":{"line":67,"column":12},"end":{"line":67,"column":39}},{"start":{"line":67,"column":43},"end":{"line":67,"column":73}}],"line":67},"24":{"loc":{"start":{"line":72,"column":8},"end":{"line":79,"column":9}},"type":"if","locations":[{"start":{"line":72,"column":8},"end":{"line":79,"column":9}},{"start":{"line":72,"column":8},"end":{"line":79,"column":9}}],"line":72},"25":{"loc":{"start":{"line":73,"column":12},"end":{"line":75,"column":13}},"type":"if","locations":[{"start":{"line":73,"column":12},"end":{"line":75,"column":13}},{"start":{"line":73,"column":12},"end":{"line":75,"column":13}}],"line":73},"26":{"loc":{"start":{"line":77,"column":33},"end":{"line":77,"column":78}},"type":"binary-expr","locations":[{"start":{"line":77,"column":33},"end":{"line":77,"column":47}},{"start":{"line":77,"column":51},"end":{"line":77,"column":78}}],"line":77},"27":{"loc":{"start":{"line":80,"column":8},"end":{"line":87,"column":9}},"type":"if","locations":[{"start":{"line":80,"column":8},"end":{"line":87,"column":9}},{"start":{"line":80,"column":8},"end":{"line":87,"column":9}}],"line":80},"28":{"loc":{"start":{"line":81,"column":12},"end":{"line":83,"column":13}},"type":"if","locations":[{"start":{"line":81,"column":12},"end":{"line":83,"column":13}},{"start":{"line":81,"column":12},"end":{"line":83,"column":13}}],"line":81},"29":{"loc":{"start":{"line":85,"column":32},"end":{"line":85,"column":76}},"type":"binary-expr","locations":[{"start":{"line":85,"column":32},"end":{"line":85,"column":45}},{"start":{"line":85,"column":49},"end":{"line":85,"column":76}}],"line":85},"30":{"loc":{"start":{"line":88,"column":15},"end":{"line":88,"column":46}},"type":"binary-expr","locations":[{"start":{"line":88,"column":15},"end":{"line":88,"column":29}},{"start":{"line":88,"column":33},"end":{"line":88,"column":46}}],"line":88},"31":{"loc":{"start":{"line":94,"column":8},"end":{"line":96,"column":9}},"type":"if","locations":[{"start":{"line":94,"column":8},"end":{"line":96,"column":9}},{"start":{"line":94,"column":8},"end":{"line":96,"column":9}}],"line":94},"32":{"loc":{"start":{"line":94,"column":12},"end":{"line":94,"column":83}},"type":"binary-expr","locations":[{"start":{"line":94,"column":12},"end":{"line":94,"column":33}},{"start":{"line":94,"column":37},"end":{"line":94,"column":58}},{"start":{"line":94,"column":62},"end":{"line":94,"column":83}}],"line":94},"33":{"loc":{"start":{"line":97,"column":8},"end":{"line":99,"column":9}},"type":"if","locations":[{"start":{"line":97,"column":8},"end":{"line":99,"column":9}},{"start":{"line":97,"column":8},"end":{"line":99,"column":9}}],"line":97},"34":{"loc":{"start":{"line":97,"column":12},"end":{"line":97,"column":98}},"type":"binary-expr","locations":[{"start":{"line":97,"column":12},"end":{"line":97,"column":38}},{"start":{"line":97,"column":42},"end":{"line":97,"column":68}},{"start":{"line":97,"column":72},"end":{"line":97,"column":98}}],"line":97},"35":{"loc":{"start":{"line":103,"column":8},"end":{"line":111,"column":9}},"type":"if","locations":[{"start":{"line":103,"column":8},"end":{"line":111,"column":9}},{"start":{"line":103,"column":8},"end":{"line":111,"column":9}}],"line":103},"36":{"loc":{"start":{"line":104,"column":12},"end":{"line":106,"column":13}},"type":"if","locations":[{"start":{"line":104,"column":12},"end":{"line":106,"column":13}},{"start":{"line":104,"column":12},"end":{"line":106,"column":13}}],"line":104},"37":{"loc":{"start":{"line":104,"column":16},"end":{"line":104,"column":72}},"type":"binary-expr","locations":[{"start":{"line":104,"column":16},"end":{"line":104,"column":42}},{"start":{"line":104,"column":46},"end":{"line":104,"column":72}}],"line":104},"38":{"loc":{"start":{"line":109,"column":22},"end":{"line":110,"column":106}},"type":"binary-expr","locations":[{"start":{"line":109,"column":22},"end":{"line":109,"column":47}},{"start":{"line":109,"column":51},"end":{"line":109,"column":79}},{"start":{"line":110,"column":19},"end":{"line":110,"column":48}},{"start":{"line":110,"column":52},"end":{"line":110,"column":106}}],"line":109},"39":{"loc":{"start":{"line":112,"column":8},"end":{"line":120,"column":9}},"type":"if","locations":[{"start":{"line":112,"column":8},"end":{"line":120,"column":9}},{"start":{"line":112,"column":8},"end":{"line":120,"column":9}}],"line":112},"40":{"loc":{"start":{"line":113,"column":12},"end":{"line":115,"column":13}},"type":"if","locations":[{"start":{"line":113,"column":12},"end":{"line":115,"column":13}},{"start":{"line":113,"column":12},"end":{"line":115,"column":13}}],"line":113},"41":{"loc":{"start":{"line":113,"column":16},"end":{"line":113,"column":72}},"type":"binary-expr","locations":[{"start":{"line":113,"column":16},"end":{"line":113,"column":42}},{"start":{"line":113,"column":46},"end":{"line":113,"column":72}}],"line":113},"42":{"loc":{"start":{"line":118,"column":22},"end":{"line":119,"column":106}},"type":"binary-expr","locations":[{"start":{"line":118,"column":22},"end":{"line":118,"column":47}},{"start":{"line":118,"column":51},"end":{"line":118,"column":79}},{"start":{"line":119,"column":19},"end":{"line":119,"column":48}},{"start":{"line":119,"column":52},"end":{"line":119,"column":106}}],"line":118},"43":{"loc":{"start":{"line":121,"column":8},"end":{"line":129,"column":9}},"type":"if","locations":[{"start":{"line":121,"column":8},"end":{"line":129,"column":9}},{"start":{"line":121,"column":8},"end":{"line":129,"column":9}}],"line":121},"44":{"loc":{"start":{"line":122,"column":12},"end":{"line":124,"column":13}},"type":"if","locations":[{"start":{"line":122,"column":12},"end":{"line":124,"column":13}},{"start":{"line":122,"column":12},"end":{"line":124,"column":13}}],"line":122},"45":{"loc":{"start":{"line":122,"column":16},"end":{"line":122,"column":72}},"type":"binary-expr","locations":[{"start":{"line":122,"column":16},"end":{"line":122,"column":42}},{"start":{"line":122,"column":46},"end":{"line":122,"column":72}}],"line":122},"46":{"loc":{"start":{"line":127,"column":22},"end":{"line":128,"column":106}},"type":"binary-expr","locations":[{"start":{"line":127,"column":22},"end":{"line":127,"column":47}},{"start":{"line":127,"column":51},"end":{"line":127,"column":79}},{"start":{"line":128,"column":19},"end":{"line":128,"column":48}},{"start":{"line":128,"column":52},"end":{"line":128,"column":106}}],"line":127},"47":{"loc":{"start":{"line":130,"column":15},"end":{"line":130,"column":44}},"type":"binary-expr","locations":[{"start":{"line":130,"column":15},"end":{"line":130,"column":22}},{"start":{"line":130,"column":26},"end":{"line":130,"column":33}},{"start":{"line":130,"column":37},"end":{"line":130,"column":44}}],"line":130},"48":{"loc":{"start":{"line":134,"column":8},"end":{"line":136,"column":9}},"type":"if","locations":[{"start":{"line":134,"column":8},"end":{"line":136,"column":9}},{"start":{"line":134,"column":8},"end":{"line":136,"column":9}}],"line":134},"49":{"loc":{"start":{"line":134,"column":12},"end":{"line":134,"column":55}},"type":"binary-expr","locations":[{"start":{"line":134,"column":12},"end":{"line":134,"column":29}},{"start":{"line":134,"column":33},"end":{"line":134,"column":55}}],"line":134},"50":{"loc":{"start":{"line":139,"column":30},"end":{"line":142,"column":87}},"type":"binary-expr","locations":[{"start":{"line":139,"column":30},"end":{"line":139,"column":55}},{"start":{"line":139,"column":59},"end":{"line":139,"column":87}},{"start":{"line":140,"column":15},"end":{"line":140,"column":49}},{"start":{"line":141,"column":15},"end":{"line":141,"column":69}},{"start":{"line":142,"column":15},"end":{"line":142,"column":87}}],"line":139},"51":{"loc":{"start":{"line":147,"column":8},"end":{"line":149,"column":9}},"type":"if","locations":[{"start":{"line":147,"column":8},"end":{"line":149,"column":9}},{"start":{"line":147,"column":8},"end":{"line":149,"column":9}}],"line":147},"52":{"loc":{"start":{"line":147,"column":12},"end":{"line":147,"column":65}},"type":"binary-expr","locations":[{"start":{"line":147,"column":12},"end":{"line":147,"column":34}},{"start":{"line":147,"column":38},"end":{"line":147,"column":65}}],"line":147},"53":{"loc":{"start":{"line":155,"column":8},"end":{"line":157,"column":9}},"type":"if","locations":[{"start":{"line":155,"column":8},"end":{"line":157,"column":9}},{"start":{"line":155,"column":8},"end":{"line":157,"column":9}}],"line":155},"54":{"loc":{"start":{"line":155,"column":12},"end":{"line":155,"column":63}},"type":"binary-expr","locations":[{"start":{"line":155,"column":12},"end":{"line":155,"column":33}},{"start":{"line":155,"column":37},"end":{"line":155,"column":63}}],"line":155},"55":{"loc":{"start":{"line":160,"column":8},"end":{"line":162,"column":9}},"type":"if","locations":[{"start":{"line":160,"column":8},"end":{"line":162,"column":9}},{"start":{"line":160,"column":8},"end":{"line":162,"column":9}}],"line":160},"56":{"loc":{"start":{"line":163,"column":15},"end":{"line":163,"column":41}},"type":"binary-expr","locations":[{"start":{"line":163,"column":15},"end":{"line":163,"column":27}},{"start":{"line":163,"column":31},"end":{"line":163,"column":41}}],"line":163},"57":{"loc":{"start":{"line":166,"column":8},"end":{"line":168,"column":9}},"type":"if","locations":[{"start":{"line":166,"column":8},"end":{"line":168,"column":9}},{"start":{"line":166,"column":8},"end":{"line":168,"column":9}}],"line":166},"58":{"loc":{"start":{"line":171,"column":21},"end":{"line":171,"column":54}},"type":"binary-expr","locations":[{"start":{"line":171,"column":21},"end":{"line":171,"column":27}},{"start":{"line":171,"column":31},"end":{"line":171,"column":54}}],"line":171},"59":{"loc":{"start":{"line":178,"column":29},"end":{"line":178,"column":62}},"type":"binary-expr","locations":[{"start":{"line":178,"column":29},"end":{"line":178,"column":43}},{"start":{"line":178,"column":48},"end":{"line":178,"column":61}}],"line":178},"60":{"loc":{"start":{"line":180,"column":15},"end":{"line":180,"column":58}},"type":"binary-expr","locations":[{"start":{"line":180,"column":15},"end":{"line":180,"column":29}},{"start":{"line":180,"column":33},"end":{"line":180,"column":58}}],"line":180},"61":{"loc":{"start":{"line":183,"column":8},"end":{"line":185,"column":9}},"type":"if","locations":[{"start":{"line":183,"column":8},"end":{"line":185,"column":9}},{"start":{"line":183,"column":8},"end":{"line":185,"column":9}}],"line":183},"62":{"loc":{"start":{"line":183,"column":12},"end":{"line":183,"column":45}},"type":"binary-expr","locations":[{"start":{"line":183,"column":12},"end":{"line":183,"column":24}},{"start":{"line":183,"column":28},"end":{"line":183,"column":45}}],"line":183},"63":{"loc":{"start":{"line":189,"column":15},"end":{"line":189,"column":127}},"type":"binary-expr","locations":[{"start":{"line":189,"column":15},"end":{"line":189,"column":69}},{"start":{"line":189,"column":73},"end":{"line":189,"column":127}}],"line":189}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":1,"125":1,"126":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0,0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0,0],"33":[0,0],"34":[0,0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0,0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0,0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0,0,0],"47":[0,0,0],"48":[0,0],"49":[0,0],"50":[0,0,0,0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/EBNF.ts","sources":["/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/EBNF.ts"],"names":[],"mappings":"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","sourcesContent":["import Dataset from \"./Dataset\";\r\nimport {\r\n\tFilter, Key,\r\n\tLComparison,\r\n\tMComparison, MKey,\r\n\tMKeyPair,\r\n\tNegation,\r\n\tOptions,\r\n\tQueryStructure,\r\n\tSComparison, SKey,\r\n\tSKeyPair\r\n} from \"./QueryInterfaces\";\r\nimport {EBNFHelper} from \"./EBNFHelper\";\r\nimport {Utils} from \"./Utils\";\r\n\r\nexport class EBNF {\r\n\r\n\tpublic datasets: Dataset[];\r\n\tpublic static mField = [\"avg\", \"pass\", \"fail\", \"audit\",\"year\"];\r\n\tpublic static sField = [\"dept\", \"id\", \"instructor\", \"title\", \"uuid\"];\r\n\r\n\tconstructor(datasets: Dataset[]) {\r\n\t\tthis.datasets = datasets;\r\n\t}\r\n\r\n\tpublic checkQueryValidEBNF(queryObject: unknown): boolean {\r\n\t\t// check if null, check if undefined\r\n\t\tif (queryObject === null || queryObject === undefined) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// check if query is not of type object\r\n\t\tif (typeof queryObject !== \"object\") {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// split the query into two parts\r\n\t\t// one part is based on the body, forms a json object\r\n\t\t// other part is based on the options, forms a json object\r\n\t\tlet queryBody = (queryObject as QueryStructure).WHERE;\r\n\t\tlet queryOptions = (queryObject as QueryStructure).OPTIONS;\r\n\r\n\t\tif (queryBody === null || queryBody === undefined) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (queryOptions === null || queryOptions === undefined) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// check the body\r\n\t\tlet validBody = this.checkQueryBody(queryBody);\r\n\t\t// check the options\r\n\t\tlet validOptions = this.checkQueryOptions(queryOptions);\r\n\r\n\t\treturn validBody && validOptions;\r\n\t}\r\n\r\n\t// checks the filters\r\n\tprivate checkQueryBody(body: object): boolean {\r\n\t\t// split query into four parts\r\n\t\tlet filter = body as Filter;\r\n\r\n\t\t// check for empty object\r\n\t\tif (Object.keys(filter).length === 0) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\t// check not null or undefined\r\n\t\tif (filter === null || filter === undefined) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet validLComparison = false;\r\n\t\tlet validMComparison = false;\r\n\t\tlet validSComparison = false;\r\n\t\tlet validNegation = false;\r\n\r\n\t\tif (EBNFHelper.isInstanceOfLComparison(filter)) {\r\n\t\t\tvalidLComparison = this.checkLogicComparison(filter);\r\n\t\t} else if (EBNFHelper.isInstanceOfMComparison(filter)) {\r\n\t\t\tvalidMComparison = this.checkMComparison(filter);\r\n\t\t} else if (EBNFHelper.isInstanceOfSComparison(filter)) {\r\n\t\t\tvalidSComparison = this.checkSComparison(filter);\r\n\t\t} else if (EBNFHelper.isInstanceOfNegation(filter)) {\r\n\t\t\tvalidNegation = this.checkNegation(filter);\r\n\t\t}\r\n\r\n\t\treturn validLComparison || validMComparison || validSComparison || validNegation;\r\n\t}\r\n\r\n\tprivate checkLogicComparison(lComparator: object): boolean {\r\n\t\tlet filterANDArray = (lComparator as LComparison).AND;\r\n\t\tlet filterORArray = (lComparator as LComparison).OR;\r\n\r\n\t\tif (filterANDArray === null || filterORArray === null) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (filterANDArray === undefined && filterORArray === undefined) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (filterANDArray === undefined && !Array.isArray(filterORArray)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (filterORArray === undefined && !Array.isArray(filterANDArray)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet validANDFilter = true;\r\n\t\tlet validORFilter = true;\r\n\r\n\t\tif (filterANDArray !== undefined) {\r\n\t\t\tif (filterANDArray.length === 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tfilterANDArray.forEach((filter) => {\r\n\t\t\t\tvalidANDFilter = validANDFilter && this.checkQueryBody(filter);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (filterORArray !== undefined) {\r\n\t\t\tif (filterORArray.length === 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tfilterORArray.forEach((filter) => {\r\n\t\t\t\tvalidORFilter = validORFilter && this.checkQueryBody(filter);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn validANDFilter && validORFilter;\r\n\t}\r\n\r\n\tprivate checkMComparison(mComparator: object): boolean {\r\n\t\tlet GTComparator = (mComparator as MComparison).GT;\r\n\t\tlet LTComparator = (mComparator as MComparison).LT;\r\n\t\tlet EQComparator = (mComparator as MComparison).EQ;\r\n\t\t// check that none of them are null\r\n\t\tif (GTComparator === null || LTComparator === null || EQComparator === null) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// check that at least one of them is defined\r\n\t\tif (GTComparator === undefined && LTComparator === undefined && EQComparator === undefined) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet validGT = true;\r\n\t\tlet validLT = true;\r\n\t\tlet validEQ = true;\r\n\t\t// check that at most one of them is defined\r\n\t\tif (GTComparator !== undefined) {\r\n\t\t\tif (LTComparator !== undefined || EQComparator !== undefined) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tlet mKeyPair = Utils.parseMKeyPair(GTComparator);\r\n\t\t\tlet mKey = mKeyPair.id + \"_\" + mKeyPair.field;\r\n\t\t\tvalidGT = mKeyPair.id !== undefined && mKeyPair.field !== undefined\r\n\t\t\t\t&& mKeyPair.number !== undefined && EBNFHelper.checkMKey(mKey, this.datasets);\r\n\t\t}\r\n\t\t// check that at most one of them is defined\r\n\t\tif (LTComparator !== undefined) {\r\n\t\t\tif (GTComparator !== undefined || EQComparator !== undefined) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tlet mKeyPair = Utils.parseMKeyPair(LTComparator);\r\n\t\t\tlet mKey = mKeyPair.id + \"_\" + mKeyPair.field;\r\n\t\t\tvalidGT = mKeyPair.id !== undefined && mKeyPair.field !== undefined\r\n\t\t\t\t&& mKeyPair.number !== undefined && EBNFHelper.checkMKey(mKey, this.datasets);\r\n\t\t}\r\n\t\t// check that at most one of them is defined\r\n\t\tif (EQComparator !== undefined) {\r\n\t\t\tif (GTComparator !== undefined || LTComparator !== undefined) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tlet mKeyPair = Utils.parseMKeyPair(EQComparator);\r\n\t\t\tlet mKey = mKeyPair.id + \"_\" + mKeyPair.field;\r\n\t\t\tvalidGT = mKeyPair.id !== undefined && mKeyPair.field !== undefined\r\n\t\t\t\t&& mKeyPair.number !== undefined && EBNFHelper.checkMKey(mKey, this.datasets);\r\n\t\t}\r\n\r\n\t\treturn validGT && validLT && validEQ;\r\n\t}\r\n\r\n\tprivate checkSComparison(sComparator: object): boolean {\r\n\t\tlet ISObject = (sComparator as SComparison).IS;\r\n\r\n\t\tif (ISObject === null || ISObject === undefined) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet sKeyPair = Utils.parseSKeyPair(ISObject);\r\n\t\tlet sKey = sKeyPair.id + \"_\" + sKeyPair.field;\r\n\t\tlet isValidSKeyPair = sKeyPair.id !== undefined && sKeyPair.field !== undefined\r\n\t\t\t&& sKeyPair.inputString !== undefined\r\n\t\t\t&& EBNFHelper.checkSKey(sKey, this.datasets)\r\n\t\t\t&& EBNFHelper.checkIsValidAsteriskString(sKeyPair.inputString);\r\n\r\n\t\treturn isValidSKeyPair;\r\n\t}\r\n\r\n\tprivate checkNegation(negation: object): boolean {\r\n\t\tlet queryNegation = (negation as Negation).NOT;\r\n\r\n\t\tif (queryNegation === null || queryNegation === undefined) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn this.checkQueryBody(queryNegation);\r\n\t}\r\n\r\n\tprivate checkQueryOptions(options: object): boolean {\r\n\t\tlet queryColumns = (options as Options).COLUMNS;\r\n\t\tlet queryOrder = (options as Options).ORDER;\r\n\r\n\t\tif (queryColumns === null || queryColumns === undefined) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// check that the columns are valid\r\n\t\tlet validColumns = this.checkQueryColumns(queryColumns);\r\n\t\tlet validOrder = true;\r\n\r\n\t\tif (queryOrder !== undefined) {\r\n\t\t\tvalidOrder = this.checkQueryOrder(queryOrder, queryColumns);\r\n\t\t}\r\n\r\n\t\treturn validColumns && validOrder;\r\n\t}\r\n\r\n\t// returns true if all elements in the array are valid keys\r\n\tprivate checkQueryColumns(column: Key[]): boolean {\r\n\t\tif (column.length === 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tlet result = true;\r\n\t\tcolumn.forEach((key) => {\r\n\t\t\tresult = result && this.checkValidKey(key);\r\n\t\t});\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// returns true if the order element is a valid key\r\n\tprivate checkQueryOrder(order: Key, columns: Key[]): boolean {\r\n\t\tlet orderInColumns = false;\r\n\t\tcolumns.forEach((key) => {\r\n\t\t\torderInColumns = orderInColumns || (key === order);\r\n\t\t});\r\n\r\n\t\treturn orderInColumns && this.checkValidKey(order);\r\n\t}\r\n\r\n\t// check the validity of a key\r\n\tprivate checkValidKey(key: Key): boolean {\r\n\t\tif (key === null || key === undefined) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet keyString = key as Key;\r\n\r\n\t\tlet mkey = keyString as MKey;\r\n\t\tlet skey = keyString as SKey;\r\n\r\n\t\treturn EBNFHelper.checkMKey(mkey, this.datasets) || EBNFHelper.checkSKey(skey, this.datasets);\r\n\t}\r\n}\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f5f4f2e5b90a2822893f4aed2faba5357151f609","contentHash":"23738ef181841af1b48f71548b343f0c78d8f7d61540700eb46dcc1fa096c99a"},"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/EBNFHelper.ts":{"path":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/EBNFHelper.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":28}},"2":{"start":{"line":4,"column":15},"end":{"line":4,"column":32}},"3":{"start":{"line":7,"column":24},"end":{"line":7,"column":39}},"4":{"start":{"line":8,"column":8},"end":{"line":10,"column":9}},"5":{"start":{"line":9,"column":12},"end":{"line":9,"column":25}},"6":{"start":{"line":11,"column":8},"end":{"line":11,"column":20}},"7":{"start":{"line":14,"column":24},"end":{"line":14,"column":39}},"8":{"start":{"line":15,"column":8},"end":{"line":17,"column":9}},"9":{"start":{"line":16,"column":12},"end":{"line":16,"column":25}},"10":{"start":{"line":18,"column":8},"end":{"line":18,"column":20}},"11":{"start":{"line":21,"column":24},"end":{"line":21,"column":39}},"12":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"13":{"start":{"line":23,"column":12},"end":{"line":23,"column":25}},"14":{"start":{"line":25,"column":20},"end":{"line":25,"column":25}},"15":{"start":{"line":26,"column":8},"end":{"line":28,"column":11}},"16":{"start":{"line":27,"column":12},"end":{"line":27,"column":59}},"17":{"start":{"line":29,"column":8},"end":{"line":29,"column":21}},"18":{"start":{"line":32,"column":24},"end":{"line":32,"column":39}},"19":{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},"20":{"start":{"line":34,"column":12},"end":{"line":34,"column":25}},"21":{"start":{"line":36,"column":20},"end":{"line":36,"column":25}},"22":{"start":{"line":37,"column":8},"end":{"line":39,"column":11}},"23":{"start":{"line":38,"column":12},"end":{"line":38,"column":59}},"24":{"start":{"line":40,"column":8},"end":{"line":40,"column":21}},"25":{"start":{"line":43,"column":8},"end":{"line":43,"column":49}},"26":{"start":{"line":46,"column":8},"end":{"line":46,"column":66}},"27":{"start":{"line":49,"column":8},"end":{"line":49,"column":30}},"28":{"start":{"line":52,"column":8},"end":{"line":52,"column":31}},"29":{"start":{"line":55,"column":26},"end":{"line":55,"column":48}},"30":{"start":{"line":56,"column":8},"end":{"line":64,"column":9}},"31":{"start":{"line":57,"column":12},"end":{"line":57,"column":24}},"32":{"start":{"line":59,"column":13},"end":{"line":64,"column":9}},"33":{"start":{"line":60,"column":12},"end":{"line":60,"column":66}},"34":{"start":{"line":62,"column":13},"end":{"line":64,"column":9}},"35":{"start":{"line":63,"column":12},"end":{"line":63,"column":66}},"36":{"start":{"line":65,"column":8},"end":{"line":65,"column":21}},"37":{"start":{"line":68,"column":0},"end":{"line":68,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":36},"end":{"line":12,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":36},"end":{"line":19,"column":5}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":20,"column":4},"end":{"line":20,"column":5}},"loc":{"start":{"line":20,"column":37},"end":{"line":30,"column":5}},"line":20},"3":{"name":"(anonymous_3)","decl":{"start":{"line":26,"column":25},"end":{"line":26,"column":26}},"loc":{"start":{"line":26,"column":38},"end":{"line":28,"column":9}},"line":26},"4":{"name":"(anonymous_4)","decl":{"start":{"line":31,"column":4},"end":{"line":31,"column":5}},"loc":{"start":{"line":31,"column":37},"end":{"line":41,"column":5}},"line":31},"5":{"name":"(anonymous_5)","decl":{"start":{"line":37,"column":25},"end":{"line":37,"column":26}},"loc":{"start":{"line":37,"column":38},"end":{"line":39,"column":9}},"line":37},"6":{"name":"(anonymous_6)","decl":{"start":{"line":42,"column":4},"end":{"line":42,"column":5}},"loc":{"start":{"line":42,"column":43},"end":{"line":44,"column":5}},"line":42},"7":{"name":"(anonymous_7)","decl":{"start":{"line":45,"column":4},"end":{"line":45,"column":5}},"loc":{"start":{"line":45,"column":43},"end":{"line":47,"column":5}},"line":45},"8":{"name":"(anonymous_8)","decl":{"start":{"line":48,"column":4},"end":{"line":48,"column":5}},"loc":{"start":{"line":48,"column":43},"end":{"line":50,"column":5}},"line":48},"9":{"name":"(anonymous_9)","decl":{"start":{"line":51,"column":4},"end":{"line":51,"column":5}},"loc":{"start":{"line":51,"column":40},"end":{"line":53,"column":5}},"line":51},"10":{"name":"(anonymous_10)","decl":{"start":{"line":54,"column":4},"end":{"line":54,"column":5}},"loc":{"start":{"line":54,"column":51},"end":{"line":66,"column":5}},"line":54}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":8},"end":{"line":10,"column":9}},"type":"if","locations":[{"start":{"line":8,"column":8},"end":{"line":10,"column":9}},{"start":{"line":8,"column":8},"end":{"line":10,"column":9}}],"line":8},"1":{"loc":{"start":{"line":15,"column":8},"end":{"line":17,"column":9}},"type":"if","locations":[{"start":{"line":15,"column":8},"end":{"line":17,"column":9}},{"start":{"line":15,"column":8},"end":{"line":17,"column":9}}],"line":15},"2":{"loc":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"type":"if","locations":[{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},{"start":{"line":22,"column":8},"end":{"line":24,"column":9}}],"line":22},"3":{"loc":{"start":{"line":27,"column":20},"end":{"line":27,"column":58}},"type":"binary-expr","locations":[{"start":{"line":27,"column":20},"end":{"line":27,"column":25}},{"start":{"line":27,"column":30},"end":{"line":27,"column":57}}],"line":27},"4":{"loc":{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},"type":"if","locations":[{"start":{"line":33,"column":8},"end":{"line":35,"column":9}},{"start":{"line":33,"column":8},"end":{"line":35,"column":9}}],"line":33},"5":{"loc":{"start":{"line":38,"column":20},"end":{"line":38,"column":58}},"type":"binary-expr","locations":[{"start":{"line":38,"column":20},"end":{"line":38,"column":25}},{"start":{"line":38,"column":30},"end":{"line":38,"column":57}}],"line":38},"6":{"loc":{"start":{"line":43,"column":15},"end":{"line":43,"column":48}},"type":"binary-expr","locations":[{"start":{"line":43,"column":15},"end":{"line":43,"column":30}},{"start":{"line":43,"column":34},"end":{"line":43,"column":48}}],"line":43},"7":{"loc":{"start":{"line":46,"column":15},"end":{"line":46,"column":65}},"type":"binary-expr","locations":[{"start":{"line":46,"column":15},"end":{"line":46,"column":29}},{"start":{"line":46,"column":33},"end":{"line":46,"column":47}},{"start":{"line":46,"column":51},"end":{"line":46,"column":65}}],"line":46},"8":{"loc":{"start":{"line":56,"column":8},"end":{"line":64,"column":9}},"type":"if","locations":[{"start":{"line":56,"column":8},"end":{"line":64,"column":9}},{"start":{"line":56,"column":8},"end":{"line":64,"column":9}}],"line":56},"9":{"loc":{"start":{"line":59,"column":13},"end":{"line":64,"column":9}},"type":"if","locations":[{"start":{"line":59,"column":13},"end":{"line":64,"column":9}},{"start":{"line":59,"column":13},"end":{"line":64,"column":9}}],"line":59},"10":{"loc":{"start":{"line":60,"column":19},"end":{"line":60,"column":65}},"type":"binary-expr","locations":[{"start":{"line":60,"column":19},"end":{"line":60,"column":40}},{"start":{"line":60,"column":44},"end":{"line":60,"column":65}}],"line":60},"11":{"loc":{"start":{"line":62,"column":13},"end":{"line":64,"column":9}},"type":"if","locations":[{"start":{"line":62,"column":13},"end":{"line":64,"column":9}},{"start":{"line":62,"column":13},"end":{"line":64,"column":9}}],"line":62},"12":{"loc":{"start":{"line":63,"column":19},"end":{"line":63,"column":65}},"type":"binary-expr","locations":[{"start":{"line":63,"column":19},"end":{"line":63,"column":40}},{"start":{"line":63,"column":44},"end":{"line":63,"column":65}}],"line":63}},"s":{"0":1,"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/EBNFHelper.ts","sources":["/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/EBNFHelper.ts"],"names":[],"mappings":";;;AACA,iCAA4B;AAO5B,MAAa,UAAU;IACf,MAAM,CAAC,kBAAkB,CAAC,IAAU;QAC1C,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAEhC,IAAI,CAAC,WAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE;YACxC,OAAO,KAAK,CAAC;SACb;QAED,OAAO,IAAI,CAAC;IACb,CAAC;IAEM,MAAM,CAAC,kBAAkB,CAAC,IAAU;QAC1C,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAEhC,IAAI,CAAC,WAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE;YACxC,OAAO,KAAK,CAAC;SACb;QAED,OAAO,IAAI,CAAC;IACb,CAAC;IAEM,MAAM,CAAC,SAAS,CAAC,IAAU,EAAE,QAAmB;QACtD,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAEhC,IAAI,CAAC,WAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE;YACxC,OAAO,KAAK,CAAC;SACb;QAED,IAAI,KAAK,GAAG,KAAK,CAAC;QAClB,QAAQ,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE;YAC5B,KAAK,GAAG,KAAK,IAAI,CAAC,OAAO,CAAC,EAAE,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;QAChD,CAAC,CAAC,CAAC;QAEH,OAAO,KAAK,CAAC;IACd,CAAC;IAEM,MAAM,CAAC,SAAS,CAAC,IAAU,EAAE,QAAmB;QACtD,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAEhC,IAAI,CAAC,WAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE;YACxC,OAAO,KAAK,CAAC;SACb;QAED,IAAI,KAAK,GAAG,KAAK,CAAC;QAClB,QAAQ,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE;YAC5B,KAAK,GAAG,KAAK,IAAI,CAAC,OAAO,CAAC,EAAE,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;QAChD,CAAC,CAAC,CAAC;QAEH,OAAO,KAAK,CAAC;IACd,CAAC;IAEM,MAAM,CAAC,uBAAuB,CAAC,MAAc;QACnD,OAAO,KAAK,IAAI,MAAM,IAAI,IAAI,IAAI,MAAM,CAAC;IAC1C,CAAC;IAEM,MAAM,CAAC,uBAAuB,CAAC,MAAc;QACnD,OAAO,IAAI,IAAI,MAAM,IAAI,IAAI,IAAI,MAAM,IAAI,IAAI,IAAI,MAAM,CAAC;IAC3D,CAAC;IAEM,MAAM,CAAC,uBAAuB,CAAC,MAAc;QACnD,OAAO,IAAI,IAAI,MAAM,CAAC;IACvB,CAAC;IAEM,MAAM,CAAC,oBAAoB,CAAC,MAAc;QAChD,OAAO,KAAK,IAAI,MAAM,CAAC;IACxB,CAAC;IAEM,MAAM,CAAC,0BAA0B,CAAC,WAAmB;QAC3D,IAAI,WAAW,GAAG,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QACzC,IAAI,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE;YAC7B,OAAO,IAAI,CAAC;SACZ;aAAM,IAAI,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE;YACpC,OAAO,WAAW,CAAC,CAAC,CAAC,KAAK,EAAE,IAAI,WAAW,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;SACtD;aAAM,IAAI,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE;YACpC,OAAO,WAAW,CAAC,CAAC,CAAC,KAAK,EAAE,IAAI,WAAW,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;SACtD;QACD,OAAO,KAAK,CAAC;IACd,CAAC;CACD;AA9ED,gCA8EC","sourcesContent":["import {LComparison, MComparison, MKey, Negation, SComparison, SKey} from \"./QueryInterfaces\";\r\nimport {EBNF} from \"./EBNF\";\r\nimport Dataset from \"./Dataset\";\r\n\r\n/*\r\nisInstanceOf methods were inspired from StackOverflow\r\nURL: https://stackoverflow.com/questions/14425568/interface-type-check-with-typescript\r\n*/\r\nexport class EBNFHelper {\r\n\tpublic static checkMKeyUnknownID(mkey: MKey): boolean {\r\n\t\tlet mKeyParts = mkey.split(\"_\");\r\n\r\n\t\tif (!EBNF.mField.includes(mKeyParts[1])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic static checkSKeyUnknownID(skey: SKey): boolean {\r\n\t\tlet sKeyParts = skey.split(\"_\");\r\n\r\n\t\tif (!EBNF.sField.includes(sKeyParts[1])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tpublic static checkMKey(mkey: MKey, datasets: Dataset[]): boolean {\r\n\t\tlet mKeyParts = mkey.split(\"_\");\r\n\r\n\t\tif (!EBNF.mField.includes(mKeyParts[1])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet valid = false;\r\n\t\tdatasets.forEach((dataset) => {\r\n\t\t\tvalid = valid || (dataset.id === mKeyParts[0]);\r\n\t\t});\r\n\r\n\t\treturn valid;\r\n\t}\r\n\r\n\tpublic static checkSKey(skey: SKey, datasets: Dataset[]): boolean {\r\n\t\tlet sKeyParts = skey.split(\"_\");\r\n\r\n\t\tif (!EBNF.sField.includes(sKeyParts[1])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet valid = false;\r\n\t\tdatasets.forEach((dataset) => {\r\n\t\t\tvalid = valid || (dataset.id === sKeyParts[0]);\r\n\t\t});\r\n\r\n\t\treturn valid;\r\n\t}\r\n\r\n\tpublic static isInstanceOfLComparison(object: object): object is LComparison {\r\n\t\treturn \"AND\" in object || \"OR\" in object;\r\n\t}\r\n\r\n\tpublic static isInstanceOfMComparison(object: object): object is MComparison {\r\n\t\treturn \"LT\" in object || \"GT\" in object || \"EQ\" in object;\r\n\t}\r\n\r\n\tpublic static isInstanceOfSComparison(object: object): object is SComparison {\r\n\t\treturn \"IS\" in object;\r\n\t}\r\n\r\n\tpublic static isInstanceOfNegation(object: object): object is Negation {\r\n\t\treturn \"NOT\" in object;\r\n\t}\r\n\r\n\tpublic static checkIsValidAsteriskString(inputString: string): boolean {\r\n\t\tlet stringArray = inputString.split(\"*\");\r\n\t\tif (stringArray.length === 1) {\r\n\t\t\treturn true;\r\n\t\t} else if (stringArray.length === 2) {\r\n\t\t\treturn stringArray[0] === \"\" || stringArray[1] === \"\";\r\n\t\t} else if (stringArray.length === 3) {\r\n\t\t\treturn stringArray[0] === \"\" && stringArray[2] === \"\";\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3823be83c0a065b316819a56059998494e41672c","contentHash":"9a0c5e5c2bfbeeaef6d1f807dcd35c747f5d2b99014a0b032f04f58c216922a9"},"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Utils.ts":{"path":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Utils.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}},"2":{"start":{"line":4,"column":25},"end":{"line":4,"column":64}},"3":{"start":{"line":5,"column":21},"end":{"line":5,"column":44}},"4":{"start":{"line":8,"column":21},"end":{"line":8,"column":23}},"5":{"start":{"line":9,"column":8},"end":{"line":19,"column":11}},"6":{"start":{"line":10,"column":27},"end":{"line":10,"column":29}},"7":{"start":{"line":11,"column":23},"end":{"line":11,"column":52}},"8":{"start":{"line":12,"column":12},"end":{"line":17,"column":13}},"9":{"start":{"line":13,"column":35},"end":{"line":13,"column":62}},"10":{"start":{"line":14,"column":16},"end":{"line":16,"column":17}},"11":{"start":{"line":15,"column":20},"end":{"line":15,"column":58}},"12":{"start":{"line":18,"column":12},"end":{"line":18,"column":34}},"13":{"start":{"line":20,"column":8},"end":{"line":20,"column":22}},"14":{"start":{"line":23,"column":23},"end":{"line":23,"column":28}},"15":{"start":{"line":24,"column":22},"end":{"line":24,"column":44}},"16":{"start":{"line":25,"column":8},"end":{"line":28,"column":11}},"17":{"start":{"line":26,"column":26},"end":{"line":26,"column":52}},"18":{"start":{"line":27,"column":12},"end":{"line":27,"column":55}},"19":{"start":{"line":29,"column":8},"end":{"line":29,"column":24}},"20":{"start":{"line":32,"column":23},"end":{"line":32,"column":47}},"21":{"start":{"line":33,"column":25},"end":{"line":33,"column":44}},"22":{"start":{"line":34,"column":8},"end":{"line":38,"column":10}},"23":{"start":{"line":41,"column":19},"end":{"line":41,"column":45}},"24":{"start":{"line":42,"column":25},"end":{"line":42,"column":40}},"25":{"start":{"line":43,"column":8},"end":{"line":47,"column":10}},"26":{"start":{"line":50,"column":19},"end":{"line":50,"column":22}},"27":{"start":{"line":51,"column":19},"end":{"line":51,"column":22}},"28":{"start":{"line":53,"column":8},"end":{"line":61,"column":9}},"29":{"start":{"line":54,"column":12},"end":{"line":54,"column":43}},"30":{"start":{"line":56,"column":13},"end":{"line":61,"column":9}},"31":{"start":{"line":57,"column":12},"end":{"line":57,"column":43}},"32":{"start":{"line":60,"column":12},"end":{"line":60,"column":70}},"33":{"start":{"line":62,"column":8},"end":{"line":62,"column":22}},"34":{"start":{"line":65,"column":26},"end":{"line":65,"column":41}},"35":{"start":{"line":66,"column":8},"end":{"line":68,"column":10}},"36":{"start":{"line":71,"column":26},"end":{"line":71,"column":41}},"37":{"start":{"line":72,"column":8},"end":{"line":74,"column":10}},"38":{"start":{"line":77,"column":26},"end":{"line":77,"column":48}},"39":{"start":{"line":78,"column":8},"end":{"line":80,"column":9}},"40":{"start":{"line":79,"column":12},"end":{"line":79,"column":50}},"41":{"start":{"line":81,"column":8},"end":{"line":97,"column":9}},"42":{"start":{"line":82,"column":39},"end":{"line":82,"column":53}},"43":{"start":{"line":83,"column":38},"end":{"line":83,"column":52}},"44":{"start":{"line":84,"column":12},"end":{"line":96,"column":13}},"45":{"start":{"line":85,"column":28},"end":{"line":85,"column":68}},"46":{"start":{"line":86,"column":16},"end":{"line":88,"column":17}},"47":{"start":{"line":87,"column":20},"end":{"line":87,"column":33}},"48":{"start":{"line":89,"column":32},"end":{"line":89,"column":60}},"49":{"start":{"line":90,"column":16},"end":{"line":90,"column":71}},"50":{"start":{"line":92,"column":17},"end":{"line":96,"column":13}},"51":{"start":{"line":93,"column":28},"end":{"line":93,"column":69}},"52":{"start":{"line":94,"column":32},"end":{"line":94,"column":67}},"53":{"start":{"line":95,"column":16},"end":{"line":95,"column":72}},"54":{"start":{"line":98,"column":8},"end":{"line":102,"column":9}},"55":{"start":{"line":99,"column":12},"end":{"line":101,"column":13}},"56":{"start":{"line":100,"column":16},"end":{"line":100,"column":60}},"57":{"start":{"line":103,"column":8},"end":{"line":103,"column":21}},"58":{"start":{"line":106,"column":0},"end":{"line":106,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":60},"end":{"line":21,"column":5}},"line":7},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":30},"end":{"line":9,"column":31}},"loc":{"start":{"line":9,"column":43},"end":{"line":19,"column":9}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":46},"end":{"line":30,"column":5}},"line":22},"3":{"name":"(anonymous_3)","decl":{"start":{"line":25,"column":22},"end":{"line":25,"column":23}},"loc":{"start":{"line":25,"column":38},"end":{"line":28,"column":9}},"line":25},"4":{"name":"(anonymous_4)","decl":{"start":{"line":31,"column":4},"end":{"line":31,"column":5}},"loc":{"start":{"line":31,"column":35},"end":{"line":39,"column":5}},"line":31},"5":{"name":"(anonymous_5)","decl":{"start":{"line":40,"column":4},"end":{"line":40,"column":5}},"loc":{"start":{"line":40,"column":37},"end":{"line":48,"column":5}},"line":40},"6":{"name":"(anonymous_6)","decl":{"start":{"line":49,"column":4},"end":{"line":49,"column":5}},"loc":{"start":{"line":49,"column":25},"end":{"line":63,"column":5}},"line":49},"7":{"name":"(anonymous_7)","decl":{"start":{"line":64,"column":4},"end":{"line":64,"column":5}},"loc":{"start":{"line":64,"column":27},"end":{"line":69,"column":5}},"line":64},"8":{"name":"(anonymous_8)","decl":{"start":{"line":70,"column":4},"end":{"line":70,"column":5}},"loc":{"start":{"line":70,"column":27},"end":{"line":75,"column":5}},"line":70},"9":{"name":"(anonymous_9)","decl":{"start":{"line":76,"column":4},"end":{"line":76,"column":5}},"loc":{"start":{"line":76,"column":51},"end":{"line":104,"column":5}},"line":76}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":16},"end":{"line":16,"column":17}},"type":"if","locations":[{"start":{"line":14,"column":16},"end":{"line":16,"column":17}},{"start":{"line":14,"column":16},"end":{"line":16,"column":17}}],"line":14},"1":{"loc":{"start":{"line":27,"column":23},"end":{"line":27,"column":54}},"type":"binary-expr","locations":[{"start":{"line":27,"column":23},"end":{"line":27,"column":31}},{"start":{"line":27,"column":35},"end":{"line":27,"column":54}}],"line":27},"2":{"loc":{"start":{"line":53,"column":8},"end":{"line":61,"column":9}},"type":"if","locations":[{"start":{"line":53,"column":8},"end":{"line":61,"column":9}},{"start":{"line":53,"column":8},"end":{"line":61,"column":9}}],"line":53},"3":{"loc":{"start":{"line":53,"column":12},"end":{"line":53,"column":82}},"type":"binary-expr","locations":[{"start":{"line":53,"column":12},"end":{"line":53,"column":30}},{"start":{"line":53,"column":34},"end":{"line":53,"column":82}}],"line":53},"4":{"loc":{"start":{"line":56,"column":13},"end":{"line":61,"column":9}},"type":"if","locations":[{"start":{"line":56,"column":13},"end":{"line":61,"column":9}},{"start":{"line":56,"column":13},"end":{"line":61,"column":9}}],"line":56},"5":{"loc":{"start":{"line":56,"column":17},"end":{"line":56,"column":87}},"type":"binary-expr","locations":[{"start":{"line":56,"column":17},"end":{"line":56,"column":35}},{"start":{"line":56,"column":39},"end":{"line":56,"column":87}}],"line":56},"6":{"loc":{"start":{"line":78,"column":8},"end":{"line":80,"column":9}},"type":"if","locations":[{"start":{"line":78,"column":8},"end":{"line":80,"column":9}},{"start":{"line":78,"column":8},"end":{"line":80,"column":9}}],"line":78},"7":{"loc":{"start":{"line":81,"column":8},"end":{"line":97,"column":9}},"type":"if","locations":[{"start":{"line":81,"column":8},"end":{"line":97,"column":9}},{"start":{"line":81,"column":8},"end":{"line":97,"column":9}}],"line":81},"8":{"loc":{"start":{"line":84,"column":12},"end":{"line":96,"column":13}},"type":"if","locations":[{"start":{"line":84,"column":12},"end":{"line":96,"column":13}},{"start":{"line":84,"column":12},"end":{"line":96,"column":13}}],"line":84},"9":{"loc":{"start":{"line":86,"column":16},"end":{"line":88,"column":17}},"type":"if","locations":[{"start":{"line":86,"column":16},"end":{"line":88,"column":17}},{"start":{"line":86,"column":16},"end":{"line":88,"column":17}}],"line":86},"10":{"loc":{"start":{"line":92,"column":17},"end":{"line":96,"column":13}},"type":"if","locations":[{"start":{"line":92,"column":17},"end":{"line":96,"column":13}},{"start":{"line":92,"column":17},"end":{"line":96,"column":13}}],"line":92},"11":{"loc":{"start":{"line":98,"column":8},"end":{"line":102,"column":9}},"type":"if","locations":[{"start":{"line":98,"column":8},"end":{"line":102,"column":9}},{"start":{"line":98,"column":8},"end":{"line":102,"column":9}}],"line":98},"12":{"loc":{"start":{"line":99,"column":12},"end":{"line":101,"column":13}},"type":"if","locations":[{"start":{"line":99,"column":12},"end":{"line":101,"column":13}},{"start":{"line":99,"column":12},"end":{"line":101,"column":13}}],"line":99},"13":{"loc":{"start":{"line":99,"column":16},"end":{"line":99,"column":62}},"type":"binary-expr","locations":[{"start":{"line":99,"column":16},"end":{"line":99,"column":37}},{"start":{"line":99,"column":41},"end":{"line":99,"column":62}}],"line":99}},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Utils.ts","sources":["/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Utils.ts"],"names":[],"mappings":"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","sourcesContent":["import {Key, MKey, MKeyPair, SKey, SKeyPair} from \"./QueryInterfaces\";\r\nimport {InsightError, InsightResult} from \"../controller/IInsightFacade\";\r\nimport Section from \"../model/Section\";\r\nimport Dataset from \"./Dataset\";\r\nimport {EBNF} from \"./EBNF\";\r\nimport {EBNFHelper} from \"./EBNFHelper\";\r\n\r\nexport class Utils {\r\n\r\n\tpublic static filterByOptions(resultSection: Section[], jsonFieldTracker: any): InsightResult[] {\r\n\t\tlet result: InsightResult[] = [];\r\n\t\tresultSection.forEach((section: any) => {\r\n\t\t\tlet tempJSON: any = {};\r\n\t\t\tlet keys = Object.keys(jsonFieldTracker);\r\n\t\t\tfor (const key of keys) {\r\n\t\t\t\tlet currentField: string = jsonFieldTracker[key].field;\r\n\t\t\t\tif (section[currentField]) {\r\n\t\t\t\t\ttempJSON[key] = (section as any)[currentField];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tresult.push(tempJSON as InsightResult);\r\n\t\t});\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic static arrayObjectIncludes(array: object[], object: object): boolean {\r\n\t\tlet contains = false;\r\n\t\tlet result1 = JSON.stringify(object);\r\n\t\tarray.forEach((tempObject) => {\r\n\t\t\tlet result2 = JSON.stringify(tempObject);\r\n\t\t\tcontains = contains || result1 === result2;\r\n\t\t});\r\n\t\treturn contains;\r\n\t}\r\n\r\n\t// public static getInsightResultsFromSections(resultDataset: Dataset[],\r\n\t// \tkeys: {id: string, field: string, number: number},\r\n\t// \tflagsLTGTEQ: {LT: boolean, GT: boolean, EQ: boolean}) {\r\n\t//\r\n\t// }\r\n\r\n\tpublic static parseSKeyPair(sKeyPair: SKeyPair): {id: string, field: string, inputString: string} {\r\n\t\tlet sKeyJson = Object.keys(sKeyPair)[0];\r\n\t\tlet sKeyValues = sKeyJson.split(\"_\");\r\n\r\n\t\treturn {\r\n\t\t\tid: sKeyValues[0],\r\n\t\t\tfield: sKeyValues[1],\r\n\t\t\tinputString: sKeyPair[sKeyJson]\r\n\t\t};\r\n\t}\r\n\r\n\tpublic static parseMKeyPair(comparator: MKeyPair): {id: string, field: string, number: number} {\r\n\t\tlet mkey = Object.keys(comparator)[0];\r\n\t\tlet mkeyValues = mkey.split(\"_\");\r\n\r\n\t\treturn {\r\n\t\t\tid: mkeyValues[0],\r\n\t\t\tfield: mkeyValues[1],\r\n\t\t\tnumber: comparator[mkey]\r\n\t\t};\r\n\t}\r\n\r\n\tpublic static parseKey(key: Key): {id: string, field: string} {\r\n\t\tlet mKey = key as MKey;\r\n\t\tlet sKey = key as SKey;\r\n\t\tlet result: {id: string, field: string};\r\n\r\n\t\tif (mKey !== undefined && EBNFHelper.checkMKeyUnknownID(mKey)) {\r\n\t\t\tresult = Utils.parseMKey(mKey);\r\n\t\t} else if (sKey !== undefined && EBNFHelper.checkSKeyUnknownID(sKey)) {\r\n\t\t\tresult = Utils.parseSKey(sKey);\r\n\t\t} else {\r\n\t\t\t// console.log(\"Error on line: \");\r\n\t\t\t// return {id: \"\", field: \"\"};\r\n\t\t\tthrow new InsightError(\"Invalid query.\");\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tpublic static parseMKey(mkey: MKey): {id: string, field: string} {\r\n\t\tlet stringArray = mkey.split(\"_\");\r\n\r\n\t\treturn {\r\n\t\t\tid: stringArray[0], field: stringArray[1]\r\n\t\t};\r\n\t}\r\n\r\n\tpublic static parseSKey(skey: SKey): {id: string, field: string} {\r\n\t\tlet stringArray = skey.split(\"_\");\r\n\r\n\t\treturn {\r\n\t\t\tid: stringArray[0], field: stringArray[1]\r\n\t\t};\r\n\t}\r\n\r\n\tpublic static stringMatches(fieldString: string, inputString: string): boolean {\r\n\t\tlet stringArray = inputString.split(\"*\");\r\n\r\n\t\tif (stringArray.length === 1) {\r\n\t\t\treturn fieldString === stringArray[0];\r\n\t\t}\r\n\r\n\t\tif (stringArray.length === 2) {\r\n\t\t\tlet stringBeforeAsterisk = stringArray[0];\r\n\t\t\tlet stringAfterAsterisk = stringArray[1];\r\n\r\n\t\t\tif (stringBeforeAsterisk === \"\") {\r\n\t\t\t\tlet index = fieldString.indexOf(stringAfterAsterisk);\r\n\t\t\t\tif (index === -1) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tlet subString = fieldString.substring(index);\r\n\t\t\t\treturn subString.length === stringAfterAsterisk.length;\r\n\t\t\t} else if (stringAfterAsterisk === \"\") {\r\n\t\t\t\tlet index = fieldString.indexOf(stringBeforeAsterisk);\r\n\t\t\t\tlet subString = fieldString.substring(0, index + 2);\r\n\t\t\t\treturn subString.length === stringBeforeAsterisk.length;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (stringArray.length === 3) {\r\n\t\t\tif (stringArray[0] === \"\" && stringArray[2] === \"\") {\r\n\t\t\t\treturn fieldString.includes(stringArray[1]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"b2755055386812cd03e6448aa7a84a7296b87471","contentHash":"946fca333165407722a70ba834654882b69119b66d614fdd97c4b7b7824ab019"},"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Query.ts":{"path":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Query.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":23}},"2":{"start":{"line":4,"column":25},"end":{"line":4,"column":64}},"3":{"start":{"line":5,"column":16},"end":{"line":5,"column":34}},"4":{"start":{"line":6,"column":21},"end":{"line":6,"column":44}},"5":{"start":{"line":7,"column":15},"end":{"line":7,"column":32}},"6":{"start":{"line":10,"column":8},"end":{"line":10,"column":29}},"7":{"start":{"line":11,"column":8},"end":{"line":11,"column":33}},"8":{"start":{"line":14,"column":25},"end":{"line":14,"column":42}},"9":{"start":{"line":15,"column":27},"end":{"line":15,"column":46}},"10":{"start":{"line":16,"column":27},"end":{"line":16,"column":47}},"11":{"start":{"line":17,"column":25},"end":{"line":17,"column":43}},"12":{"start":{"line":18,"column":31},"end":{"line":18,"column":33}},"13":{"start":{"line":19,"column":8},"end":{"line":23,"column":11}},"14":{"start":{"line":20,"column":28},"end":{"line":20,"column":55}},"15":{"start":{"line":21,"column":27},"end":{"line":21,"column":63}},"16":{"start":{"line":22,"column":12},"end":{"line":22,"column":51}},"17":{"start":{"line":24,"column":27},"end":{"line":24,"column":78}},"18":{"start":{"line":25,"column":8},"end":{"line":44,"column":9}},"19":{"start":{"line":26,"column":28},"end":{"line":26,"column":62}},"20":{"start":{"line":27,"column":31},"end":{"line":27,"column":46}},"21":{"start":{"line":28,"column":12},"end":{"line":43,"column":15}},"22":{"start":{"line":29,"column":16},"end":{"line":42,"column":17}},"23":{"start":{"line":30,"column":20},"end":{"line":30,"column":74}},"24":{"start":{"line":33,"column":20},"end":{"line":41,"column":21}},"25":{"start":{"line":34,"column":24},"end":{"line":34,"column":34}},"26":{"start":{"line":36,"column":25},"end":{"line":41,"column":21}},"27":{"start":{"line":37,"column":24},"end":{"line":37,"column":33}},"28":{"start":{"line":40,"column":24},"end":{"line":40,"column":33}},"29":{"start":{"line":45,"column":8},"end":{"line":45,"column":28}},"30":{"start":{"line":48,"column":22},"end":{"line":48,"column":24}},"31":{"start":{"line":49,"column":8},"end":{"line":63,"column":9}},"32":{"start":{"line":50,"column":12},"end":{"line":50,"column":52}},"33":{"start":{"line":52,"column":13},"end":{"line":63,"column":9}},"34":{"start":{"line":53,"column":12},"end":{"line":53,"column":74}},"35":{"start":{"line":55,"column":13},"end":{"line":63,"column":9}},"36":{"start":{"line":56,"column":12},"end":{"line":56,"column":74}},"37":{"start":{"line":58,"column":13},"end":{"line":63,"column":9}},"38":{"start":{"line":59,"column":12},"end":{"line":59,"column":74}},"39":{"start":{"line":61,"column":13},"end":{"line":63,"column":9}},"40":{"start":{"line":62,"column":12},"end":{"line":62,"column":74}},"41":{"start":{"line":64,"column":8},"end":{"line":64,"column":23}},"42":{"start":{"line":67,"column":26},"end":{"line":67,"column":28}},"43":{"start":{"line":68,"column":8},"end":{"line":70,"column":11}},"44":{"start":{"line":69,"column":12},"end":{"line":69,"column":59}},"45":{"start":{"line":71,"column":8},"end":{"line":71,"column":76}},"46":{"start":{"line":74,"column":28},"end":{"line":74,"column":45}},"47":{"start":{"line":75,"column":22},"end":{"line":75,"column":24}},"48":{"start":{"line":76,"column":8},"end":{"line":76,"column":37}},"49":{"start":{"line":77,"column":8},"end":{"line":77,"column":73}},"50":{"start":{"line":78,"column":8},"end":{"line":78,"column":23}},"51":{"start":{"line":81,"column":19},"end":{"line":81,"column":38}},"52":{"start":{"line":82,"column":27},"end":{"line":82,"column":60}},"53":{"start":{"line":83,"column":30},"end":{"line":83,"column":32}},"54":{"start":{"line":84,"column":29},"end":{"line":86,"column":10}},"55":{"start":{"line":85,"column":12},"end":{"line":85,"column":50}},"56":{"start":{"line":87,"column":8},"end":{"line":104,"column":11}},"57":{"start":{"line":88,"column":31},"end":{"line":102,"column":14}},"58":{"start":{"line":89,"column":28},"end":{"line":89,"column":46}},"59":{"start":{"line":90,"column":16},"end":{"line":101,"column":17}},"60":{"start":{"line":91,"column":20},"end":{"line":93,"column":21}},"61":{"start":{"line":92,"column":24},"end":{"line":92,"column":101}},"62":{"start":{"line":94,"column":20},"end":{"line":94,"column":33}},"63":{"start":{"line":97,"column":20},"end":{"line":99,"column":21}},"64":{"start":{"line":98,"column":24},"end":{"line":98,"column":102}},"65":{"start":{"line":100,"column":20},"end":{"line":100,"column":32}},"66":{"start":{"line":103,"column":12},"end":{"line":103,"column":67}},"67":{"start":{"line":105,"column":8},"end":{"line":105,"column":80}},"68":{"start":{"line":108,"column":17},"end":{"line":108,"column":36}},"69":{"start":{"line":109,"column":17},"end":{"line":109,"column":36}},"70":{"start":{"line":110,"column":17},"end":{"line":110,"column":36}},"71":{"start":{"line":112,"column":26},"end":{"line":114,"column":9}},"72":{"start":{"line":115,"column":8},"end":{"line":120,"column":9}},"73":{"start":{"line":119,"column":12},"end":{"line":119,"column":70}},"74":{"start":{"line":121,"column":8},"end":{"line":135,"column":9}},"75":{"start":{"line":122,"column":12},"end":{"line":122,"column":28}},"76":{"start":{"line":123,"column":12},"end":{"line":123,"column":34}},"77":{"start":{"line":125,"column":13},"end":{"line":135,"column":9}},"78":{"start":{"line":126,"column":12},"end":{"line":126,"column":28}},"79":{"start":{"line":127,"column":12},"end":{"line":127,"column":34}},"80":{"start":{"line":129,"column":13},"end":{"line":135,"column":9}},"81":{"start":{"line":130,"column":12},"end":{"line":130,"column":28}},"82":{"start":{"line":131,"column":12},"end":{"line":131,"column":34}},"83":{"start":{"line":134,"column":12},"end":{"line":134,"column":70}},"84":{"start":{"line":136,"column":19},"end":{"line":136,"column":58}},"85":{"start":{"line":137,"column":8},"end":{"line":139,"column":9}},"86":{"start":{"line":138,"column":12},"end":{"line":138,"column":70}},"87":{"start":{"line":140,"column":28},"end":{"line":142,"column":10}},"88":{"start":{"line":141,"column":12},"end":{"line":141,"column":42}},"89":{"start":{"line":143,"column":28},"end":{"line":143,"column":30}},"90":{"start":{"line":144,"column":8},"end":{"line":149,"column":11}},"91":{"start":{"line":145,"column":34},"end":{"line":147,"column":14}},"92":{"start":{"line":146,"column":16},"end":{"line":146,"column":89}},"93":{"start":{"line":148,"column":12},"end":{"line":148,"column":66}},"94":{"start":{"line":150,"column":8},"end":{"line":150,"column":78}},"95":{"start":{"line":153,"column":8},"end":{"line":176,"column":9}},"96":{"start":{"line":154,"column":12},"end":{"line":175,"column":13}},"97":{"start":{"line":155,"column":16},"end":{"line":163,"column":17}},"98":{"start":{"line":156,"column":20},"end":{"line":156,"column":61}},"99":{"start":{"line":158,"column":21},"end":{"line":163,"column":17}},"100":{"start":{"line":159,"column":20},"end":{"line":159,"column":61}},"101":{"start":{"line":161,"column":21},"end":{"line":163,"column":17}},"102":{"start":{"line":162,"column":20},"end":{"line":162,"column":63}},"103":{"start":{"line":166,"column":16},"end":{"line":174,"column":17}},"104":{"start":{"line":167,"column":20},"end":{"line":167,"column":64}},"105":{"start":{"line":169,"column":21},"end":{"line":174,"column":17}},"106":{"start":{"line":170,"column":20},"end":{"line":170,"column":64}},"107":{"start":{"line":172,"column":21},"end":{"line":174,"column":17}},"108":{"start":{"line":173,"column":20},"end":{"line":173,"column":66}},"109":{"start":{"line":177,"column":8},"end":{"line":177,"column":21}},"110":{"start":{"line":180,"column":23},"end":{"line":180,"column":43}},"111":{"start":{"line":181,"column":22},"end":{"line":181,"column":41}},"112":{"start":{"line":182,"column":8},"end":{"line":185,"column":9}},"113":{"start":{"line":184,"column":12},"end":{"line":184,"column":70}},"114":{"start":{"line":186,"column":21},"end":{"line":186,"column":23}},"115":{"start":{"line":187,"column":8},"end":{"line":198,"column":9}},"116":{"start":{"line":188,"column":29},"end":{"line":188,"column":31}},"117":{"start":{"line":189,"column":12},"end":{"line":191,"column":15}},"118":{"start":{"line":190,"column":16},"end":{"line":190,"column":81}},"119":{"start":{"line":192,"column":12},"end":{"line":197,"column":15}},"120":{"start":{"line":193,"column":42},"end":{"line":195,"column":18}},"121":{"start":{"line":194,"column":20},"end":{"line":194,"column":87}},"122":{"start":{"line":196,"column":16},"end":{"line":196,"column":43}},"123":{"start":{"line":199,"column":8},"end":{"line":204,"column":9}},"124":{"start":{"line":200,"column":12},"end":{"line":203,"column":15}},"125":{"start":{"line":201,"column":33},"end":{"line":201,"column":80}},"126":{"start":{"line":202,"column":16},"end":{"line":202,"column":51}},"127":{"start":{"line":205,"column":8},"end":{"line":205,"column":22}},"128":{"start":{"line":208,"column":0},"end":{"line":208,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":26},"end":{"line":12,"column":5}},"line":9},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":26},"end":{"line":46,"column":5}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":19,"column":29},"end":{"line":19,"column":30}},"loc":{"start":{"line":19,"column":38},"end":{"line":23,"column":9}},"line":19},"3":{"name":"(anonymous_3)","decl":{"start":{"line":28,"column":30},"end":{"line":28,"column":31}},"loc":{"start":{"line":28,"column":40},"end":{"line":43,"column":13}},"line":28},"4":{"name":"(anonymous_4)","decl":{"start":{"line":47,"column":4},"end":{"line":47,"column":5}},"loc":{"start":{"line":47,"column":51},"end":{"line":65,"column":5}},"line":47},"5":{"name":"(anonymous_5)","decl":{"start":{"line":66,"column":4},"end":{"line":66,"column":5}},"loc":{"start":{"line":66,"column":29},"end":{"line":72,"column":5}},"line":66},"6":{"name":"(anonymous_6)","decl":{"start":{"line":68,"column":30},"end":{"line":68,"column":31}},"loc":{"start":{"line":68,"column":43},"end":{"line":70,"column":9}},"line":68},"7":{"name":"(anonymous_7)","decl":{"start":{"line":73,"column":4},"end":{"line":73,"column":5}},"loc":{"start":{"line":73,"column":54},"end":{"line":79,"column":5}},"line":73},"8":{"name":"(anonymous_8)","decl":{"start":{"line":80,"column":4},"end":{"line":80,"column":5}},"loc":{"start":{"line":80,"column":57},"end":{"line":106,"column":5}},"line":80},"9":{"name":"(anonymous_9)","decl":{"start":{"line":84,"column":50},"end":{"line":84,"column":51}},"loc":{"start":{"line":84,"column":63},"end":{"line":86,"column":9}},"line":84},"10":{"name":"(anonymous_10)","decl":{"start":{"line":87,"column":27},"end":{"line":87,"column":28}},"loc":{"start":{"line":87,"column":40},"end":{"line":104,"column":9}},"line":87},"11":{"name":"(anonymous_11)","decl":{"start":{"line":88,"column":51},"end":{"line":88,"column":52}},"loc":{"start":{"line":88,"column":64},"end":{"line":102,"column":13}},"line":88},"12":{"name":"(anonymous_12)","decl":{"start":{"line":107,"column":4},"end":{"line":107,"column":5}},"loc":{"start":{"line":107,"column":57},"end":{"line":151,"column":5}},"line":107},"13":{"name":"(anonymous_13)","decl":{"start":{"line":140,"column":49},"end":{"line":140,"column":50}},"loc":{"start":{"line":140,"column":62},"end":{"line":142,"column":9}},"line":140},"14":{"name":"(anonymous_14)","decl":{"start":{"line":144,"column":26},"end":{"line":144,"column":27}},"loc":{"start":{"line":144,"column":39},"end":{"line":149,"column":9}},"line":144},"15":{"name":"(anonymous_15)","decl":{"start":{"line":145,"column":54},"end":{"line":145,"column":55}},"loc":{"start":{"line":145,"column":67},"end":{"line":147,"column":13}},"line":145},"16":{"name":"(anonymous_16)","decl":{"start":{"line":152,"column":4},"end":{"line":152,"column":5}},"loc":{"start":{"line":152,"column":66},"end":{"line":178,"column":5}},"line":152},"17":{"name":"(anonymous_17)","decl":{"start":{"line":179,"column":4},"end":{"line":179,"column":5}},"loc":{"start":{"line":179,"column":57},"end":{"line":206,"column":5}},"line":179},"18":{"name":"(anonymous_18)","decl":{"start":{"line":189,"column":29},"end":{"line":189,"column":30}},"loc":{"start":{"line":189,"column":41},"end":{"line":191,"column":13}},"line":189},"19":{"name":"(anonymous_19)","decl":{"start":{"line":192,"column":39},"end":{"line":192,"column":40}},"loc":{"start":{"line":192,"column":71},"end":{"line":197,"column":13}},"line":192},"20":{"name":"(anonymous_20)","decl":{"start":{"line":193,"column":62},"end":{"line":193,"column":63}},"loc":{"start":{"line":193,"column":78},"end":{"line":195,"column":17}},"line":193},"21":{"name":"(anonymous_21)","decl":{"start":{"line":200,"column":28},"end":{"line":200,"column":29}},"loc":{"start":{"line":200,"column":40},"end":{"line":203,"column":13}},"line":200}},"branchMap":{"0":{"loc":{"start":{"line":25,"column":8},"end":{"line":44,"column":9}},"type":"if","locations":[{"start":{"line":25,"column":8},"end":{"line":44,"column":9}},{"start":{"line":25,"column":8},"end":{"line":44,"column":9}}],"line":25},"1":{"loc":{"start":{"line":29,"column":16},"end":{"line":42,"column":17}},"type":"if","locations":[{"start":{"line":29,"column":16},"end":{"line":42,"column":17}},{"start":{"line":29,"column":16},"end":{"line":42,"column":17}}],"line":29},"2":{"loc":{"start":{"line":33,"column":20},"end":{"line":41,"column":21}},"type":"if","locations":[{"start":{"line":33,"column":20},"end":{"line":41,"column":21}},{"start":{"line":33,"column":20},"end":{"line":41,"column":21}}],"line":33},"3":{"loc":{"start":{"line":36,"column":25},"end":{"line":41,"column":21}},"type":"if","locations":[{"start":{"line":36,"column":25},"end":{"line":41,"column":21}},{"start":{"line":36,"column":25},"end":{"line":41,"column":21}}],"line":36},"4":{"loc":{"start":{"line":49,"column":8},"end":{"line":63,"column":9}},"type":"if","locations":[{"start":{"line":49,"column":8},"end":{"line":63,"column":9}},{"start":{"line":49,"column":8},"end":{"line":63,"column":9}}],"line":49},"5":{"loc":{"start":{"line":52,"column":13},"end":{"line":63,"column":9}},"type":"if","locations":[{"start":{"line":52,"column":13},"end":{"line":63,"column":9}},{"start":{"line":52,"column":13},"end":{"line":63,"column":9}}],"line":52},"6":{"loc":{"start":{"line":55,"column":13},"end":{"line":63,"column":9}},"type":"if","locations":[{"start":{"line":55,"column":13},"end":{"line":63,"column":9}},{"start":{"line":55,"column":13},"end":{"line":63,"column":9}}],"line":55},"7":{"loc":{"start":{"line":58,"column":13},"end":{"line":63,"column":9}},"type":"if","locations":[{"start":{"line":58,"column":13},"end":{"line":63,"column":9}},{"start":{"line":58,"column":13},"end":{"line":63,"column":9}}],"line":58},"8":{"loc":{"start":{"line":61,"column":13},"end":{"line":63,"column":9}},"type":"if","locations":[{"start":{"line":61,"column":13},"end":{"line":63,"column":9}},{"start":{"line":61,"column":13},"end":{"line":63,"column":9}}],"line":61},"9":{"loc":{"start":{"line":90,"column":16},"end":{"line":101,"column":17}},"type":"if","locations":[{"start":{"line":90,"column":16},"end":{"line":101,"column":17}},{"start":{"line":90,"column":16},"end":{"line":101,"column":17}}],"line":90},"10":{"loc":{"start":{"line":91,"column":20},"end":{"line":93,"column":21}},"type":"if","locations":[{"start":{"line":91,"column":20},"end":{"line":93,"column":21}},{"start":{"line":91,"column":20},"end":{"line":93,"column":21}}],"line":91},"11":{"loc":{"start":{"line":97,"column":20},"end":{"line":99,"column":21}},"type":"if","locations":[{"start":{"line":97,"column":20},"end":{"line":99,"column":21}},{"start":{"line":97,"column":20},"end":{"line":99,"column":21}}],"line":97},"12":{"loc":{"start":{"line":115,"column":8},"end":{"line":120,"column":9}},"type":"if","locations":[{"start":{"line":115,"column":8},"end":{"line":120,"column":9}},{"start":{"line":115,"column":8},"end":{"line":120,"column":9}}],"line":115},"13":{"loc":{"start":{"line":115,"column":12},"end":{"line":118,"column":73}},"type":"binary-expr","locations":[{"start":{"line":115,"column":13},"end":{"line":115,"column":29}},{"start":{"line":115,"column":33},"end":{"line":115,"column":49}},{"start":{"line":115,"column":53},"end":{"line":115,"column":69}},{"start":{"line":116,"column":16},"end":{"line":116,"column":32}},{"start":{"line":116,"column":36},"end":{"line":116,"column":52}},{"start":{"line":116,"column":56},"end":{"line":116,"column":72}},{"start":{"line":117,"column":16},"end":{"line":117,"column":32}},{"start":{"line":117,"column":36},"end":{"line":117,"column":52}},{"start":{"line":117,"column":56},"end":{"line":117,"column":72}},{"start":{"line":118,"column":16},"end":{"line":118,"column":32}},{"start":{"line":118,"column":36},"end":{"line":118,"column":52}},{"start":{"line":118,"column":56},"end":{"line":118,"column":72}}],"line":115},"14":{"loc":{"start":{"line":121,"column":8},"end":{"line":135,"column":9}},"type":"if","locations":[{"start":{"line":121,"column":8},"end":{"line":135,"column":9}},{"start":{"line":121,"column":8},"end":{"line":135,"column":9}}],"line":121},"15":{"loc":{"start":{"line":125,"column":13},"end":{"line":135,"column":9}},"type":"if","locations":[{"start":{"line":125,"column":13},"end":{"line":135,"column":9}},{"start":{"line":125,"column":13},"end":{"line":135,"column":9}}],"line":125},"16":{"loc":{"start":{"line":129,"column":13},"end":{"line":135,"column":9}},"type":"if","locations":[{"start":{"line":129,"column":13},"end":{"line":135,"column":9}},{"start":{"line":129,"column":13},"end":{"line":135,"column":9}}],"line":129},"17":{"loc":{"start":{"line":137,"column":8},"end":{"line":139,"column":9}},"type":"if","locations":[{"start":{"line":137,"column":8},"end":{"line":139,"column":9}},{"start":{"line":137,"column":8},"end":{"line":139,"column":9}}],"line":137},"18":{"loc":{"start":{"line":153,"column":8},"end":{"line":176,"column":9}},"type":"if","locations":[{"start":{"line":153,"column":8},"end":{"line":176,"column":9}},{"start":{"line":153,"column":8},"end":{"line":176,"column":9}}],"line":153},"19":{"loc":{"start":{"line":154,"column":12},"end":{"line":175,"column":13}},"type":"if","locations":[{"start":{"line":154,"column":12},"end":{"line":175,"column":13}},{"start":{"line":154,"column":12},"end":{"line":175,"column":13}}],"line":154},"20":{"loc":{"start":{"line":155,"column":16},"end":{"line":163,"column":17}},"type":"if","locations":[{"start":{"line":155,"column":16},"end":{"line":163,"column":17}},{"start":{"line":155,"column":16},"end":{"line":163,"column":17}}],"line":155},"21":{"loc":{"start":{"line":158,"column":21},"end":{"line":163,"column":17}},"type":"if","locations":[{"start":{"line":158,"column":21},"end":{"line":163,"column":17}},{"start":{"line":158,"column":21},"end":{"line":163,"column":17}}],"line":158},"22":{"loc":{"start":{"line":161,"column":21},"end":{"line":163,"column":17}},"type":"if","locations":[{"start":{"line":161,"column":21},"end":{"line":163,"column":17}},{"start":{"line":161,"column":21},"end":{"line":163,"column":17}}],"line":161},"23":{"loc":{"start":{"line":166,"column":16},"end":{"line":174,"column":17}},"type":"if","locations":[{"start":{"line":166,"column":16},"end":{"line":174,"column":17}},{"start":{"line":166,"column":16},"end":{"line":174,"column":17}}],"line":166},"24":{"loc":{"start":{"line":169,"column":21},"end":{"line":174,"column":17}},"type":"if","locations":[{"start":{"line":169,"column":21},"end":{"line":174,"column":17}},{"start":{"line":169,"column":21},"end":{"line":174,"column":17}}],"line":169},"25":{"loc":{"start":{"line":172,"column":21},"end":{"line":174,"column":17}},"type":"if","locations":[{"start":{"line":172,"column":21},"end":{"line":174,"column":17}},{"start":{"line":172,"column":21},"end":{"line":174,"column":17}}],"line":172},"26":{"loc":{"start":{"line":182,"column":8},"end":{"line":185,"column":9}},"type":"if","locations":[{"start":{"line":182,"column":8},"end":{"line":185,"column":9}},{"start":{"line":182,"column":8},"end":{"line":185,"column":9}}],"line":182},"27":{"loc":{"start":{"line":182,"column":12},"end":{"line":183,"column":64}},"type":"binary-expr","locations":[{"start":{"line":182,"column":13},"end":{"line":182,"column":35}},{"start":{"line":182,"column":39},"end":{"line":182,"column":60}},{"start":{"line":183,"column":16},"end":{"line":183,"column":38}},{"start":{"line":183,"column":42},"end":{"line":183,"column":63}}],"line":182},"28":{"loc":{"start":{"line":187,"column":8},"end":{"line":198,"column":9}},"type":"if","locations":[{"start":{"line":187,"column":8},"end":{"line":198,"column":9}},{"start":{"line":187,"column":8},"end":{"line":198,"column":9}}],"line":187},"29":{"loc":{"start":{"line":199,"column":8},"end":{"line":204,"column":9}},"type":"if","locations":[{"start":{"line":199,"column":8},"end":{"line":204,"column":9}},{"start":{"line":199,"column":8},"end":{"line":204,"column":9}}],"line":199}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":1},"f":{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},"b":{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0,0,0,0,0,0,0,0,0,0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0,0,0],"28":[0,0],"29":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Query.ts","sources":["/Users/evan/Documents/Projects/2022/cpsc310-project/src/model/Query.ts"],"names":[],"mappings":"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","sourcesContent":["import Dataset from \"./Dataset\";\r\nimport {InsightError, InsightResult} from \"../controller/IInsightFacade\";\r\nimport {Utils} from \"./Utils\";\r\nimport {\r\n\tQueryStructure, Filter, LComparison, MComparison, MKeyPair, Negation, SComparison\r\n} from \"./QueryInterfaces\";\r\nimport Section from \"./Section\";\r\nimport {EBNFHelper} from \"./EBNFHelper\";\r\nimport {EBNF} from \"./EBNF\";\r\n\r\nexport class Query {\r\n\tpublic datasets: Dataset[];\r\n\tprivate notFlag: boolean = false;\r\n\r\n\tconstructor(datasets: Dataset[]) {\r\n\t\tthis.datasets = datasets;\r\n\t}\r\n\r\n\t// gets the elements from the dataset using the query\r\n\tpublic getQuery(queryObject: QueryStructure): InsightResult[] {\r\n\t\t// query\r\n\t\tlet queryWhere = queryObject.WHERE;\r\n\t\tlet queryOptions = queryObject.OPTIONS;\r\n\t\t// options\r\n\t\tlet queryColumns = queryOptions.COLUMNS;\r\n\t\tlet queryOrder = queryOptions.ORDER;\r\n\r\n\t\tlet jsonFieldTracker: any = {};\r\n\r\n\t\tqueryColumns.forEach((key) => {\r\n\t\t\tlet keyValues = Utils.parseKey(key);\r\n\t\t\tlet stringID = keyValues.id + \"_\" + keyValues.field;\r\n\r\n\t\t\tjsonFieldTracker[stringID] = keyValues;\r\n\t\t});\r\n\r\n\t\t// results\r\n\t\tlet queryResults = this.getQueryByFilter(queryWhere, jsonFieldTracker);\r\n\r\n\t\tif (queryOrder !== undefined) {\r\n\t\t\tlet keyValues = Utils.parseKey(queryOrder);\r\n\t\t\tlet sortByString = keyValues.field;\r\n\r\n\t\t\tqueryResults.sort((a: any,b: any) => {\r\n\t\t\t\tif (typeof a[sortByString] === \"string\") {\r\n\t\t\t\t\treturn a[sortByString].localeCompare(b[sortByString]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (a[sortByString] < b[sortByString]) {\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t} else if (a[sortByString] > b[sortByString]) {\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn queryResults;\r\n\t}\r\n\r\n\tprivate getQueryByFilter(queryWhere: Filter, jsonFieldTracker: any): InsightResult[] {\r\n\t\t// comparators\r\n\t\tlet results: InsightResult[] = [];\r\n\r\n\t\tif (JSON.stringify(queryWhere) === \"{}\") {\r\n\t\t\tresults = this.getAll(jsonFieldTracker);\r\n\t\t} else if (EBNFHelper.isInstanceOfLComparison(queryWhere)) {\r\n\t\t\tresults = this.getByLComparator(queryWhere as LComparison, jsonFieldTracker);\r\n\t\t} else if (EBNFHelper.isInstanceOfMComparison(queryWhere)) {\r\n\t\t\tresults = this.getByMComparator(queryWhere as MComparison, jsonFieldTracker);\r\n\t\t} else if (EBNFHelper.isInstanceOfSComparison(queryWhere)) {\r\n\t\t\tresults = this.getBySComparator(queryWhere as SComparison, jsonFieldTracker);\r\n\t\t} else if (EBNFHelper.isInstanceOfNegation(queryWhere)) {\r\n\t\t\tresults = this.getByNComparator(queryWhere as Negation, jsonFieldTracker);\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n\r\n\tprivate getAll(jsonFieldTracker: any): InsightResult[] {\r\n\t\tlet allSections: Section[] = [];\r\n\r\n\t\tthis.datasets.forEach((dataset) => {\r\n\t\t\tallSections = allSections.concat(dataset.data);\r\n\t\t});\r\n\r\n\t\treturn Utils.filterByOptions(allSections, jsonFieldTracker);\r\n\t}\r\n\r\n\tprivate getByNComparator(queryNegation: Negation, jsonFieldTracker: any): InsightResult[] {\r\n\t\t// take everything that we have in the dataset, and remove queries from\r\n\t\t// getQueryByFilter from it\r\n\t\tlet deepNotFilter = queryNegation.NOT;\r\n\t\tlet results: InsightResult[] = [];\r\n\t\tthis.notFlag = !this.notFlag;\r\n\r\n\t\tresults = this.getQueryByFilter(deepNotFilter, jsonFieldTracker);\r\n\r\n\t\treturn results;\r\n\t}\r\n\r\n\tprivate getBySComparator(querySComparator: SComparison, jsonFieldTracker: any): InsightResult[] {\r\n\t\t// get the queries following the SKey\r\n\t\tlet sKey = querySComparator.IS;\r\n\t\tlet sKeyPairJson = Utils.parseSKeyPair(sKey);\r\n\r\n\t\tlet currentSections: Section[] = [];\r\n\r\n\t\t// filter through the dataset to get the queries satisfying the conditions\r\n\t\tlet currentDataset = this.datasets.filter((dataset) => {\r\n\t\t\treturn dataset.id === sKeyPairJson.id;\r\n\t\t});\r\n\r\n\t\tcurrentDataset.map((dataset) => {\r\n\t\t\tlet tempSections = dataset.data.filter((section: any) => {\r\n\t\t\t\tlet field = sKeyPairJson.field;\r\n\t\t\t\tif (!this.notFlag) {\r\n\t\t\t\t\tif (section[field] !== undefined) {\r\n\t\t\t\t\t\treturn Utils.stringMatches(section[field], sKeyPairJson.inputString);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (section[field] !== undefined) {\r\n\t\t\t\t\t\treturn !Utils.stringMatches(section[field], sKeyPairJson.inputString);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tcurrentSections = currentSections.concat(tempSections);\r\n\t\t});\r\n\r\n\t\treturn Utils.filterByOptions(currentSections, jsonFieldTracker);\r\n\t}\r\n\r\n\t// returns all fields that satisfy the comparator\r\n\t// get the queries based on the MKeyPair\r\n\t// check that there is only one valid pair (even though I think valid EBNF may already do that)\r\n\tprivate getByMComparator(queryMComparator: MComparison, jsonFieldTracker: any): InsightResult[] {\r\n\t\tlet LT = queryMComparator.LT;\r\n\t\tlet GT = queryMComparator.GT;\r\n\t\tlet EQ = queryMComparator.EQ;\r\n\t\tlet comparator: MKeyPair;\r\n\t\tlet flagsLTGTEQ: {LT: boolean, GT: boolean, EQ: boolean} = {\r\n\t\t\tLT: false, GT: false, EQ: false\r\n\t\t};\r\n\t\tif ((LT !== undefined && GT !== undefined && EQ !== undefined)\r\n\t\t\t|| (LT !== undefined && GT !== undefined && EQ === undefined)\r\n\t\t\t|| (LT !== undefined && GT === undefined && EQ !== undefined)\r\n\t\t\t|| (LT === undefined && GT !== undefined && EQ !== undefined)) {\r\n\t\t\t// console.log(\"Error on line: \");\r\n\t\t\t// return [];\r\n\t\t\tthrow new InsightError(\"Invalid query.\");\r\n\t\t}\r\n\t\tif (LT !== undefined) {\r\n\t\t\tcomparator = LT;\r\n\t\t\tflagsLTGTEQ.LT = true;\r\n\t\t} else if (GT !== undefined) {\r\n\t\t\tcomparator = GT;\r\n\t\t\tflagsLTGTEQ.GT = true;\r\n\t\t} else if (EQ !== undefined) {\r\n\t\t\tcomparator = EQ;\r\n\t\t\tflagsLTGTEQ.EQ = true;\r\n\t\t} else {\r\n\t\t\t// has to be one of the three comparators above\r\n\t\t\tthrow new InsightError(\"Invalid query.\");\r\n\t\t}\r\n\t\tlet keys = Utils.parseMKeyPair(comparator);\r\n\t\tif (!EBNF.mField.includes(keys.field)) {\r\n\t\t\t// console.log(\"Error on line: \");\r\n\t\t\t// return [];\r\n\t\t\tthrow new InsightError(\"Invalid query.\");\r\n\t\t}\r\n\t\tlet resultDataset = this.datasets.filter((dataset) => {\r\n\t\t\treturn dataset.id === keys.id;\r\n\t\t});\r\n\t\tlet resultSection: Section[] = [];\r\n\t\tresultDataset.map((dataset) => {\r\n\t\t\tlet filteredDataset = dataset.data.filter((section: any) => {\r\n\t\t\t\treturn Query.filterMComparator(section, keys, flagsLTGTEQ, this.notFlag);\r\n\t\t\t});\r\n\t\t\tresultSection = resultSection.concat(filteredDataset);\r\n\t\t});\r\n\t\treturn Utils.filterByOptions(resultSection, jsonFieldTracker);\r\n\t}\r\n\r\n\tprivate static filterMComparator(section: any, keys: {id: string; field: string; number: number},\r\n\t\tflagsLTGTEQ: {LT: boolean; GT: boolean; EQ: boolean}, notFlag: boolean) {\r\n\t\tif (section[keys.field]) {\r\n\t\t\tif (!notFlag) {\r\n\t\t\t\tif (flagsLTGTEQ.LT) {\r\n\t\t\t\t\treturn (section as any)[keys.field] < keys.number;\r\n\t\t\t\t} else if (flagsLTGTEQ.GT) {\r\n\t\t\t\t\treturn (section as any)[keys.field] > keys.number;\r\n\t\t\t\t} else if (flagsLTGTEQ.EQ) {\r\n\t\t\t\t\treturn (section as any)[keys.field] === keys.number;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (flagsLTGTEQ.LT) {\r\n\t\t\t\t\treturn !((section as any)[keys.field] < keys.number);\r\n\t\t\t\t} else if (flagsLTGTEQ.GT) {\r\n\t\t\t\t\treturn !((section as any)[keys.field] > keys.number);\r\n\t\t\t\t} else if (flagsLTGTEQ.EQ) {\r\n\t\t\t\t\treturn !((section as any)[keys.field] === keys.number);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// returns all fields satisfying AND or OR\r\n\tprivate getByLComparator(queryLComparator: LComparison, jsonFieldTracker: any): InsightResult[] {\r\n\t\t// check if it is AND or OR\r\n\t\t// then write everything based on that\r\n\t\tlet arrayAnd = queryLComparator.AND;\r\n\t\tlet arrayOr = queryLComparator.OR;\r\n\r\n\t\tif (\r\n\t\t\t(arrayAnd === undefined && arrayOr === undefined)\r\n\t\t\t|| (arrayAnd !== undefined && arrayOr !== undefined)\r\n\t\t) {\r\n\t\t\t// console.log(\"Error on line: \");\r\n\t\t\t// return [];\r\n\t\t\tthrow new InsightError(\"Invalid query.\");\r\n\t\t}\r\n\r\n\t\tlet result: InsightResult[] = [];\r\n\r\n\t\tif (arrayAnd !== undefined) {\r\n\t\t\tlet arrayAnd2d: InsightResult[][] = [];\r\n\r\n\t\t\tarrayAnd.forEach((filter) => {\r\n\t\t\t\tarrayAnd2d.push(this.getQueryByFilter(filter, jsonFieldTracker));\r\n\t\t\t});\r\n\r\n\t\t\tresult = arrayAnd2d.reduce((resultArray1, resultArray2): InsightResult[] => {\r\n\t\t\t\tlet currentIntersection = resultArray1.filter((tempResult) => {\r\n\t\t\t\t\treturn Utils.arrayObjectIncludes(resultArray2, tempResult);\r\n\t\t\t\t});\r\n\t\t\t\treturn currentIntersection;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif (arrayOr !== undefined) {\r\n\t\t\tarrayOr.forEach((filter) => {\r\n\t\t\t\tlet tempResult = this.getQueryByFilter(filter, jsonFieldTracker);\r\n\t\t\t\tresult = result.concat(tempResult);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"16c16b968ae76dc43c1051197344137ecfa3ca93","contentHash":"710d7575a8f7536fc0d524efad4b83573e5e2f6ae125c110c453873905c57c5b"},"/Users/evan/Documents/Projects/2022/cpsc310-project/src/services/DiskManager.ts":{"path":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/services/DiskManager.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":54}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":62}},"5":{"start":{"line":8,"column":25},"end":{"line":8,"column":64}},"6":{"start":{"line":9,"column":15},"end":{"line":9,"column":23}},"7":{"start":{"line":10,"column":11},"end":{"line":10,"column":24}},"8":{"start":{"line":12,"column":4},"end":{"line":14,"column":5}},"9":{"start":{"line":13,"column":8},"end":{"line":13,"column":29}},"10":{"start":{"line":15,"column":19},"end":{"line":15,"column":21}},"11":{"start":{"line":16,"column":4},"end":{"line":36,"column":5}},"12":{"start":{"line":17,"column":26},"end":{"line":17,"column":48}},"13":{"start":{"line":18,"column":8},"end":{"line":32,"column":11}},"14":{"start":{"line":19,"column":25},"end":{"line":19,"column":44}},"15":{"start":{"line":20,"column":27},"end":{"line":20,"column":68}},"16":{"start":{"line":21,"column":12},"end":{"line":31,"column":13}},"17":{"start":{"line":23,"column":16},"end":{"line":28,"column":17}},"18":{"start":{"line":24,"column":20},"end":{"line":24,"column":103}},"19":{"start":{"line":27,"column":20},"end":{"line":27,"column":101}},"20":{"start":{"line":29,"column":16},"end":{"line":29,"column":38}},"21":{"start":{"line":30,"column":16},"end":{"line":30,"column":45}},"22":{"start":{"line":35,"column":8},"end":{"line":35,"column":27}},"23":{"start":{"line":37,"column":4},"end":{"line":37,"column":20}},"24":{"start":{"line":39,"column":0},"end":{"line":39,"column":36}},"25":{"start":{"line":41,"column":4},"end":{"line":43,"column":5}},"26":{"start":{"line":42,"column":8},"end":{"line":42,"column":29}},"27":{"start":{"line":44,"column":4},"end":{"line":54,"column":7}},"28":{"start":{"line":45,"column":8},"end":{"line":52,"column":9}},"29":{"start":{"line":46,"column":12},"end":{"line":48,"column":13}},"30":{"start":{"line":47,"column":16},"end":{"line":47,"column":73}},"31":{"start":{"line":51,"column":12},"end":{"line":51,"column":70}},"32":{"start":{"line":53,"column":8},"end":{"line":53,"column":25}},"33":{"start":{"line":56,"column":0},"end":{"line":56,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"loadFromDisk","decl":{"start":{"line":11,"column":9},"end":{"line":11,"column":21}},"loc":{"start":{"line":11,"column":24},"end":{"line":38,"column":1}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":18,"column":26},"end":{"line":18,"column":27}},"loc":{"start":{"line":18,"column":36},"end":{"line":32,"column":9}},"line":18},"3":{"name":"persistToDisk","decl":{"start":{"line":40,"column":15},"end":{"line":40,"column":28}},"loc":{"start":{"line":40,"column":39},"end":{"line":55,"column":1}},"line":40},"4":{"name":"(anonymous_4)","decl":{"start":{"line":44,"column":23},"end":{"line":44,"column":24}},"loc":{"start":{"line":44,"column":44},"end":{"line":54,"column":5}},"line":44}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":12,"column":4},"end":{"line":14,"column":5}},"type":"if","locations":[{"start":{"line":12,"column":4},"end":{"line":14,"column":5}},{"start":{"line":12,"column":4},"end":{"line":14,"column":5}}],"line":12},"4":{"loc":{"start":{"line":21,"column":12},"end":{"line":31,"column":13}},"type":"if","locations":[{"start":{"line":21,"column":12},"end":{"line":31,"column":13}},{"start":{"line":21,"column":12},"end":{"line":31,"column":13}}],"line":21},"5":{"loc":{"start":{"line":23,"column":16},"end":{"line":28,"column":17}},"type":"if","locations":[{"start":{"line":23,"column":16},"end":{"line":28,"column":17}},{"start":{"line":23,"column":16},"end":{"line":28,"column":17}}],"line":23},"6":{"loc":{"start":{"line":41,"column":4},"end":{"line":43,"column":5}},"type":"if","locations":[{"start":{"line":41,"column":4},"end":{"line":43,"column":5}},{"start":{"line":41,"column":4},"end":{"line":43,"column":5}}],"line":41}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":1},"f":{"0":1,"1":0,"2":0,"3":0,"4":0},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/evan/Documents/Projects/2022/cpsc310-project/src/services/DiskManager.ts","sources":["/Users/evan/Documents/Projects/2022/cpsc310-project/src/services/DiskManager.ts"],"names":[],"mappings":";;;;;;AAAA,+DAAuC;AACvC,iEAA8E;AAG9E,MAAM,MAAM,GAAW,QAAQ,CAAC;AAChC,MAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AAEzB,SAAgB,YAAY;IAC3B,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE;QAC3B,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;KACrB;IACD,IAAI,QAAQ,GAAc,EAAE,CAAC;IAC7B,IAAI;QACH,MAAM,SAAS,GAAG,EAAE,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QACzC,SAAS,CAAC,OAAO,CAAC,CAAC,IAAS,EAAE,EAAE;YAC/B,MAAM,IAAI,GAAG,MAAM,GAAG,GAAG,GAAG,IAAI,CAAC;YACjC,MAAM,MAAM,GAAU,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,YAAY,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,CAAC;YAChE,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;gBACtB,IAAI,OAAY,CAAC;gBACjB,IAAI,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE;oBAC7B,OAAO,GAAG,IAAI,iBAAO,CAAC,IAAI,EAAE,mCAAkB,CAAC,OAAO,CAAC,CAAC;iBACxD;qBAAM;oBACN,OAAO,GAAG,IAAI,iBAAO,CAAC,IAAI,EAAE,mCAAkB,CAAC,KAAK,CAAC,CAAC;iBACtD;gBACD,OAAO,CAAC,IAAI,GAAG,MAAM,CAAC;gBACtB,OAAO,CAAC,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC;aAC7B;QACF,CAAC,CAAC,CAAC;KACH;IAAC,OAAM,GAAG,EAAE;QACZ,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;KACnB;IACD,OAAO,QAAQ,CAAC;AACjB,CAAC;AAzBD,oCAyBC;AAEM,KAAK,UAAU,aAAa,CAAC,QAAmB;IACtD,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE;QAC3B,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;KACrB;IACD,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;QACtC,IAAI;YACH,KAAK,IAAI,CAAC,IAAI,QAAQ,EAAE;gBACvB,EAAE,CAAC,aAAa,CAAC,MAAM,GAAG,GAAG,GAAG,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;aAGzD;SACD;QAAC,OAAM,GAAG,EAAE;YAEZ,OAAO,MAAM,CAAC,IAAI,6BAAY,CAAC,OAAO,CAAC,CAAC,CAAC;SACzC;QACD,OAAO,OAAO,EAAE,CAAC;IAClB,CAAC,CAAC,CAAC;AAEJ,CAAC;AAlBD,sCAkBC","sourcesContent":["import Dataset from \"../model/Dataset\";\r\nimport {InsightDatasetKind, InsightError} from \"../controller/IInsightFacade\";\r\n\r\n\r\nconst folder: string = \"./data\";\r\nconst fs = require(\"fs\");\r\n\r\nexport function loadFromDisk(): Dataset[] {\r\n\tif (!fs.existsSync(folder)) {\r\n\t\tfs.mkdirSync(folder);\r\n\t}\r\n\tlet datasets: Dataset[] = [];\r\n\ttry {\r\n\t\tconst filenames = fs.readdirSync(folder);\r\n\t\tfilenames.forEach((file: any) => {\r\n\t\t\tconst path = folder + \"/\" + file;\r\n\t\t\tconst result: any[] = JSON.parse(fs.readFileSync(path, \"utf8\"));\r\n\t\t\tif (result.length > 0) {\r\n\t\t\t\tlet dataset: any;\r\n\t\t\t\tif (result[0].hasOwn(\"dept\")) {\r\n\t\t\t\t\tdataset = new Dataset(file, InsightDatasetKind.Courses);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdataset = new Dataset(file, InsightDatasetKind.Rooms);\r\n\t\t\t\t}\r\n\t\t\t\tdataset.data = result;\r\n\t\t\t\tdataset.size = result.length;\r\n\t\t\t}\r\n\t\t});\r\n\t} catch(err) {\r\n\t\tconsole.error(err);\r\n\t}\r\n\treturn datasets;\r\n}\r\n\r\nexport async function persistToDisk(datasets: Dataset[]): Promise<void> {\r\n\tif (!fs.existsSync(folder)) {\r\n\t\tfs.mkdirSync(folder);\r\n\t}\r\n\treturn new Promise((resolve, reject) => {\r\n\t\ttry {\r\n\t\t\tfor (let d of datasets) {\r\n\t\t\t\tfs.writeFileSync(folder + \"/\" + d.id, JSON.stringify(d));\r\n\t\t\t\t// console.log(JSON.stringify(d));\r\n\t\t\t\t// console.log(fs.existsSync(folder + \"/\" + d.id));\r\n\t\t\t}\r\n\t\t} catch(err) {\r\n\t\t\t// console.error(err);\r\n\t\t\treturn reject(new InsightError(\"error\"));\r\n\t\t}\r\n\t\treturn resolve();\r\n\t});\r\n\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"73fef3777a39ed9c8574e0b1a74f574d9cee04eb","contentHash":"597975729c479667c84176685f2ba1a5f5a9fdb257df7efbe7a909bb3a63015f"}}